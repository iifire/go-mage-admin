/*** grid.js ***/
function mioGrid(t,e,i,n,r,a){this.initialize(t,e,i,n,r,a)}function openGridRow(t,e){var i=Event.findElement(e,"tr");-1==["a","input","select","option"].indexOf(Event.element(e).tagName.toLowerCase())&&i.title&&setLocation(i.title)}function mioGridMassaction(t,e,i,n,r){this.initialize(t,e,i,n,r)}mioGrid.prototype={initialize:function(t,e,i,n,r,a){this.containerId=t,this.url=e,this.pageVar=i||!1,this.sortVar=n||!1,this.dirVar=r||!1,this.filterVar=a||!1,this.tableSufix="_table",this.useAjax=!1,this.rowClickCallback=!1,this.checkboxCheckCallback=!1,this.preInitCallback=!1,this.initCallback=!1,this.initRowCallback=!1,this.doFilterCallback=!1,this.reloadParams=!1,this.initGrid()},initGrid:function(){if(this.preInitCallback&&this.preInitCallback(this),$(this.containerId+this.tableSufix)){this.rows=$("#"+this.containerId+this.tableSufix+" tbody tr");this.rows.each(function(t,e){t%2==0&&$(e).addClass("even")})}if(this.initCallback)try{this.initCallback(this)}catch(t){console&&console.log(t)}},initGridAjax:function(){this.initGrid(),this.initGridRows()},initGridRows:function(){if(this.initRowCallback)for(var t=0;t<this.rows.length;t++)try{this.initRowCallback(this,this.rows[t])}catch(t){console&&console.log(t)}},getContainerId:function(){return this.containerId},rowMouseOver:function(t){var e=Event.findElement(t,"tr");e.title&&(Element.addClassName(e,"on-mouse"),Element.hasClassName("pointer")||this.rowClickCallback===openGridRow&&!e.title||e.title&&Element.addClassName(e,"pointer"))},rowMouseOut:function(t){var e=Event.findElement(t,"tr");Element.removeClassName(e,"on-mouse")},rowMouseClick:function(t){if(this.rowClickCallback)try{this.rowClickCallback(this,t)}catch(t){}varienGlobalEvents.fireEvent("gridRowClick",t)},rowMouseDblClick:function(t){varienGlobalEvents.fireEvent("gridRowDblClick",t)},keyPress:function(t){},doSort:function(t){var e=Event.findElement(t,"a");return e.name&&e.title&&(this.addVarToUrl(this.sortVar,e.name),this.addVarToUrl(this.dirVar,e.title),this.reload(this.url)),Event.stop(t),!1},loadByElement:function(t){t&&t.name&&this.reload(this.addVarToUrl(t.name,t.value))},reload:function(t){this.reloadParams?this.reloadParams.form_key=FORM_KEY:this.reloadParams={form_key:FORM_KEY};var e=this;if(t=t||this.url,this.useAjax){t=t+(t.match(new RegExp("\\?"))?"&ajax=true":"?ajax=true");var i=this.reloadParams||{};$.get(t,i,function(t){if(t.match("^{(.+:.+,*){1,}}$"))(t=$.parseJSON(t)).ajaxExpired&&t.ajaxRedirect&&setLocation(response.ajaxRedirect);else{var i=$(t);$("#"+e.containerId).html(i.find(".grid").parent()),"function"==typeof myGridSelected&&myGridSelected()}})}else{for(var n in this.reloadParams)"function"!=typeof this.reloadParams[n]&&(t=this.addVarToUrl(n,this.reloadParams[n]));location.href=t}},_processFailure:function(t){location.href=BASE_URL},_addVarToUrl:function(t,e,i){var n=new RegExp("/("+e+"/.*?/)"),r=t.split(new RegExp("\\?"));return t=r[0].replace(n,"/"),t+=e+"/"+i+"/",r.length>1&&(t+="?"+r[1]),t},addVarToUrl:function(t,e){return this.url=this._addVarToUrl(this.url,t,e),this.url},doExport:function(){if($(this.containerId+"_export")){var t=$("#"+this.containerId+"_export").val();this.massaction&&this.massaction.checkedString&&(t=this._addVarToUrl(t,this.massaction.formFieldNameInternal,this.massaction.checkedString)),location.href=t}},bindFilterFields:function(){var t=this;$("#"+this.containerId+" .filter input, #"+this.containerId+" .filter select").each(function(){$(this).keydown(function(e){13==e.which&&t.doFilter()})})},bindFieldsChange:function(){if($(this.containerId))$(this.containerId+this.tableSufix).find("tbody input,tbody select")},filterKeyPress:function(t){13==t.keyCode&&this.doFilter()},doFilter:function(){var t=$(".grid-filter-element"),e=[];t.each(function(t,i){$(i).val()&&e.push(encodeURIComponent($(i).attr("name"))+"="+encodeURIComponent($(i).val()))}),e=e.join("&"),(!this.doFilterCallback||this.doFilterCallback&&this.doFilterCallback())&&this.reload(this.addVarToUrl(this.filterVar,encode_base64(e)))},resetFilter:function(){this.reload(this.addVarToUrl(this.filterVar,""))},inputPage:function(t,e){var i=t.target;13==(t.keyCode||t.which)&&this.setPage(i.value)},setPage:function(t){$(".page[name=page]").val(t),this.reload(this.addVarToUrl(this.pageVar,t))}},mioGridMassaction.prototype={checkedValues:{},checkedString:"",oldCallbacks:{},errorText:"",items:{},gridIds:[],useSelectAll:!1,currentItem:!1,lastChecked:{left:!1,top:!1,checkbox:!1},fieldTemplate:'<input type="hidden" name="#{name}" value="#{value}" />',initialize:function(t,e,i,n,r){this.useAjax=!1,this.grid=e,this.grid.massaction=this,this.containerId=t,this.initMassactionElements(),this.checkedString=i,this.formFieldName=r,this.initCheckboxes(),this.checkCheckboxes()},setUseAjax:function(t){this.useAjax=t},setUseSelectAll:function(t){this.useSelectAll=t},initMassactionElements:function(){this.container=$("#"+this.containerId),this.count=$("#"+this.containerId+"-count"),this.formHiddens=$("#"+this.containerId+"-form-hiddens"),this.formAdditional=$("#"+this.containerId+"-form-additional"),this.select=$("#"+this.containerId+"-select"),this.form=this.prepareForm(),this.validator=new Validation(this.form.id),this.lastChecked={left:!1,top:!1,checkbox:!1},this.initMassSelect();var t=this;$("#"+this.containerId+" select").bind("change",function(){var e=$(this);e.val()?t.formAdditional.html($("#"+t.containerId+"-item-"+e.val()+"-block").html()):t.formAdditional.html("")})},prepareForm:function(){var t=$("#"+this.containerId+"-form"),e=null,i=this.formHiddens||this.formAdditional;return i||(i=this.container.getElementsByTagName("button")[0])&&i.parentNode,!t&&i&&((t=document.createElement("form")).setAttribute("method","post"),t.setAttribute("action",""),t.id=this.containerId+"-form",(e=i.parentNode.parentNode).parentNode.appendChild(t),t.appendChild(e)),t},setGridIds:function(t){this.gridIds=t,this.updateCount()},getGridIds:function(){return this.gridIds},setItems:function(t){this.items=t,this.updateCount()},getItems:function(){return this.items},getItem:function(t){return!!this.items[t]&&this.items[t]},initCheckboxes:function(){},checkCheckboxes:function(){var t=this.getCheckedValues().split(",");$(".massaction-checkbox").each(function(){$.inArray($(this).val(),t)>=0?$(this).prop("checked",!0):$(this).removeAttr("checked")})},selectAll:function(){var t=[];return $(".massaction-checkbox").each(function(){t.push($(this).val())}),this.setCheckedValues(t.join(",")),this.checkCheckboxes(),this.updateCount(),!1},unselectAll:function(){return this.setCheckedValues(""),this.checkCheckboxes(),this.updateCount(),!1},setCheckedValues:function(t){this.checkedString=t},getCheckedValues:function(){return this.checkedString},getCheckboxesValues:function(){var t=[];return $(".massaction-checkbox").each(function(){t.push($(this).val())}),t},getCheckboxesValuesAsString:function(){return this.getCheckboxesValues().join(",")},updateCount:function(){this.count.html(varienStringArray.count(this.checkedString)),this.grid.reloadParams||(this.grid.reloadParams={})},getSelectedItem:function(){return!!this.getItem(this.select.val())&&this.getItem(this.select.val())},apply:function(){if(0!=varienStringArray.count(this.checkedString)){var t=this.getSelectedItem();if(console.log(t),t){this.currentItem=t;var e=t.field?t.field:this.formFieldName;this.currentItem.confirm&&!window.confirm(this.currentItem.confirm)||(this.formHiddens.html(""),this.fieldTemplate=this.fieldTemplate.replace("#{name}",e),this.fieldTemplate=this.fieldTemplate.replace("#{value}",this.checkedString),this.formHiddens.html(this.fieldTemplate),this.validator.validate()&&t.url&&(this.form.attr("action",t.url),this.form.submit()))}else this.validator.validate()}else alert(this.errorText)},collectCheck:function(){var t=[];$(".massaction-checkbox:checked").each(function(){t.push($(this).val())}),this.setCheckedValues(t.join(",")),this.updateCount()},initMassSelect:function(){var t=this;$(".massaction-checkbox").click(function(){t.collectCheck()})}};var mioGridAction={execute:function(t){if(t.value){var e=$.parseJSON(t.value);if(!e.confirm||window.confirm(e.confirm))if(e.popup)window.open(e.href,"action_window","width=500,height=600,resizable=1,scrollbars=1").focus(),t.options[0].selected=!0;else setLocation(e.href);else t.options[0].selected=!0}}},varienStringArray={remove:function(t,e){return e=(e=","+e+",").replace(new RegExp(","+t+",","g"),","),this.trimComma(e)},add:function(t,e){return-1===(e=","+e+",").search(new RegExp(","+t+",","g"),e)&&(e+=t+","),this.trimComma(e)},has:function(t,e){return-1!==(e=","+e+",").search(new RegExp(","+t+",","g"),e)},count:function(t){return"string"!=typeof t?0:(match=t.match(new RegExp(",","g")))?match.length+1:0!=t.length?1:0},each:function(t,e){t=t.split(",");for(var i=0;i<t.length;i++)e(t[i])},trimComma:function(t){return t=(t=t.replace(new RegExp("^(,+)","i"),"")).replace(new RegExp("(,+)$","i"),"")}};function encode_base64(t){for(var e,i,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="",a=t.length,s=0;a-- >0;){if(e=t.charCodeAt(s++),r+=n.charAt(e>>2&63),a--<=0){r+=n.charAt(e<<4&63),r+="==";break}if(i=t.charCodeAt(s++),r+=n.charAt(63&(e<<4|i>>4&15)),a--<=0){r+=n.charAt(i<<2&63),r+="=";break}e=t.charCodeAt(s++),r+=n.charAt(63&(i<<2|e>>6&3)),r+=n.charAt(63&e)}return r}function decode_base64(t){for(var e,i,n=new Array(255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,255,255,255,255,255),r="",a=(t.length,0);!isNaN(e=t.charCodeAt(a++));)if(13!=e&&10!=e){if(e>127||255==(e=n[e]))return!1;if(isNaN(i=t.charCodeAt(a++))||255==(i=n[i]))return!1;if(r+=String.fromCharCode(e<<2|i>>4),61==(e=t.charCodeAt(a++))){if(61!=t.charCodeAt(a++)||!isNaN(t.charCodeAt(a)))return!1}else{if(e>127||255==(e=n[e]))return!1;if(r+=String.fromCharCode(i<<4|e>>2),61==(i=t.charCodeAt(a++))){if(!isNaN(t.charCodeAt(a)))return!1}else{if(i>127||255==(i=n[i]))return!1;r+=String.fromCharCode(e<<6|i)}}}return r}function wrap76(t){var e,i="";for(e=0;e<t.length;e+=76)i+=t.substring(e,e+76)+String.fromCharCode(13)+String.fromCharCode(10);return i}
/*** form.js ***/
function mioForm(i,t,a){this.initialize(i,t,a)}function FormElementDependenceController(i){this.initialize(i)}function Validator(){this.initialize()}function $F(i){return $("#"+i).val()}function $IsEmpty(i){return""==i||null==i||0==i.length||/^\s+$/.test(i)}function Validation(i,t){this.initialize(i,t)}function removeDelimiters(i){return i=(i=i.replace(/\s/g,"")).replace(/\-/g,"")}function parseNumber(i){if("string"!=typeof i)return parseFloat(i);var t=i.indexOf("."),a=i.indexOf(",");return-1!=t&&-1!=a?i=a>t?i.replace(".","").replace(",","."):i.replace(",",""):-1!=a&&(i=i.replace(",",".")),parseFloat(i)}mioForm.prototype={initialize:function(i,t,a){this.formId=i,this.validationUrl=t,this.submitUrl=$("#"+this.formId).attr("action"),this.submitCallback=!(!a||!a.submitCallback)&&a.submitCallback,$("#"+this.formId)&&(this.validator=new Validation(this.formId)),this.errorSections={}},serialize:function(){return $("#"+this.formId).serialize()},validate:function(){return!(!this.validator||!this.validator.validate())&&(this.validationUrl&&this._validate(),!0)},submit:function(i){return this.errorSections={},this.canShowError=!0,this.submitUrl=i,CKupdate(),!(!this.validator||!this.validator.validate())&&(this.validationUrl?this._validate():this._submit(),!0)},_validate:function(){$.ajax({type:"POST",url:this.validationUrl,data:$("#"+this.formId).serialize(),dataType:"JSON",success:function(i){this._processValidationResult(i)},error:function(i){this._processFailure(i)}})},_processValidationResult:function(i){i.error?$("#messages")&&($("#messages").innerHTML=i.message):this._submit()},_processFailure:function(i){console.log(i)},_submit:function(){$this=this;var i=$("#"+this.formId);i.hasClass("ajax-submit")?$.ajax({type:"POST",url:$("#"+$this.formId).attr("action"),data:$("#"+$this.formId).serialize(),dataType:"JSON",success:function(i){$this.submitCallback&&$this.submitCallback(i)},error:function(i){$this._processFailure(i)}}):(this.submitUrl&&(i.action=$this.submitUrl),i.submit())}},FormElementDependenceController.prototype={initialize:function(i){for(var t in i)for(var a in i[t]){if($("input[name="+a+"]").length)$("input[name="+a+"]").val()!=i[t][a]&&$("#"+t).parent().parent().hide(),$("input[name="+a+"]").change(function(){$(this).val()!=i[t][a]?$("#"+t).parent().parent().hide():$("#"+t).parent().parent().show()})}}},Validator.prototype={initialize:function(){this.error="验证失败。"},test:function(i){var t=Validator.methods;for(var a in i.siblings(".validation-advice").remove(),t)if(i.hasClass(t[a][0])&&!t[a][2](i.val())){var e='<div class="validation-advice" id="advice-'+t[a][0]+"-"+i.id+'" style="display:block">'+t[a][1]+"</div>";i.after(e);break}}},Validator.methods=[["required-entry","必填项",function(i){return!$IsEmpty(i)}]],Validation.defaultOptions={containerClassName:".input-box"},Validation.prototype={initialize:function(i,t){this.form=$("#"+i),this.form},onChange:function(i){Validation.isOnChange=!1},onSubmit:function(i){if(!this.validate())return!1},validate:function(){var i=!1;try{this.form.find("input,select,textarea,file").each(function(i,t){var a=$(this);(new Validator).test(a)}),0==this.form.find(".validation-advice").length&&(i=!0)}catch(i){console.log(i)}return i},reset:function(){},isVisible:function(i){return!0},createAdvice:function(i,t,a,e){},get:function(i){return Validation.methods[i]?Validation.methods[i]:null},addAllThese:function(i){}};
/*** layer.js ***/
!function(e,t){"use strict";var o,i,s={getPath:function(){var e=document.scripts,t=e[e.length-1].src;return t.substring(0,t.lastIndexOf("/")+1)},type:["dialog","page","iframe","loading","tips"]};e.layer={v:"1.8.5",ie6:!!e.ActiveXObject&&!e.XMLHttpRequest,index:0,path:s.getPath(),use:function(e,t){var i=o("head")[0],s=(e=e.replace(/\s/g,""),/\.css$/.test(e)),a=document.createElement(s?"link":"script"),r=e.replace(/\.|\//g,"");s&&(a.type="text/css",a.rel="stylesheet"),a[s?"href":"src"]=/^http:\/\//.test(e)?e:layer.path+e,a.id=r,o("#"+r)[0]||i.appendChild(a),t&&(document.all?o(a).ready(t):o(a).load(t))},alert:function(e,t,i,s){var a="function"==typeof i,r={dialog:{msg:e,type:t,yes:a?i:s},area:["360px","142px"]};return a||(r.title=i),o.layer(r)},confirm:function(e,t,i,s){var a="162px",r="360px";"object"==typeof e&&(a=e.hgt?e.hgt:a,r=e.wdt?e.wdt:r,e=e.msg);var n="function"==typeof i,l={dialog:{msg:e,type:0,btns:2,yes:t,no:n?i:s},area:[r,a]};return n||(l.title=i),o.layer(l)},msg:function(e,t,i,s){var a={title:!1,closeBtn:!1,time:void 0===t?2:t,dialog:{msg:""===e||void 0===e?"&nbsp;":e},end:s};return"object"==typeof i?(a.dialog.type=i.type,a.shade=i.shade,a.shift=i.rate):"function"==typeof i?a.end=i:a.dialog.type=i,o.layer(a)},load:function(e,t){return"string"==typeof e?layer.msg(e,t||0,16):o.layer({time:e,loading:{type:t},bgcolor:t?"#fff":"",shade:t?[.1,"#000"]:[0],border:3!==t&&t?[6,.5,"#000"]:[0],type:3,title:["",!1],closeBtn:[0,!1]})},tips:function(e,t,i,s,a,r){var n={type:4,shade:!1,success:function(e){this.closeBtn||e.find(".xubox_tips").css({"padding-right":10})},bgcolor:"",tips:{msg:e,follow:t}};return n.time="object"==typeof i?i.time:0|i,i=i||{},n.closeBtn=i.closeBtn||!1,n.maxWidth=i.maxWidth||s,n.tips.guide=i.guide||a,n.tips.style=i.style||r,n.tips.more=i.more,o.layer(n)}};var a=["xubox_layer","xubox_iframe",".xubox_title",".xubox_text",".xubox_page",".xubox_main"],r=function(e){var t=this.config;layer.index++,this.index=layer.index,this.config=o.extend({},t,e),this.config.dialog=o.extend({},t.dialog,e.dialog),this.config.page=o.extend({},t.page,e.page),this.config.iframe=o.extend({},t.iframe,e.iframe),this.config.loading=o.extend({},t.loading,e.loading),this.config.tips=o.extend({},t.tips,e.tips),this.creat()};(r.pt=r.prototype).config={type:0,shade:[.5,"#000"],fix:!0,move:".xubox_title",title:"&#x63D0;&#x793A;&#x4FE1;&#x606F;",offset:["","50%"],area:["310px","auto"],closeBtn:[0,!0],time:0,bgcolor:"#fff",border:[1,.3,"#909090"],zIndex:19891014,maxWidth:400,dialog:{btns:1,btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],type:8,msg:"",yes:function(e){layer.close(e)},no:function(e){layer.close(e)}},page:{dom:"#xulayer",html:"",url:""},iframe:{src:"http://sentsin.com",scrolling:"auto"},loading:{type:0},tips:{msg:"",follow:"",guide:0,isGuide:!0,style:["background-color:#FF9900; color:#fff;","#FF9900"]},success:function(e,t){},close:function(e){layer.close(e)},end:function(){}},r.pt.space=function(e){e=e||"";var t=this.index,o=this.config,i=o.dialog,s=-1===i.type?"":'<span class="xubox_msg xulayer_png32 xubox_msgico xubox_msgtype'+i.type+'"></span>',r=['<div class="xubox_dialog">'+s+'<span class="xubox_msg xubox_text" style="'+(s?"":"padding-left:10px")+'">'+i.msg+"</span></div>",'<div class="xubox_page">'+e+"</div>",'<iframe scrolling="'+o.iframe.scrolling+'" allowtransparency="true" id="'+a[1]+t+'" name="'+a[1]+t+'" onload="this.className=\''+a[1]+'\'" class="'+a[1]+'" frameborder="0" src="'+o.iframe.src+'"></iframe>','<span class="xubox_loading xubox_loading_'+o.loading.type+'"></span>','<div class="xubox_tips" style="'+o.tips.style[0]+'"><div class="xubox_tipsMsg">'+o.tips.msg+'</div><i class="layerTipsG"></i></div>'],n="",l="",c=o.zIndex+t,f="z-index:"+c+"; background-color:"+o.shade[1]+"; opacity:"+o.shade[0]+"; filter:alpha(opacity="+100*o.shade[0]+");";o.shade[0]&&(n='<div times="'+t+'" id="xubox_shade'+t+'" class="xubox_shade" style="'+f+'"></div>'),o.zIndex=c;var d="",p="",u="z-index:"+(c-1)+";  background-color: "+o.border[2]+"; opacity:"+o.border[1]+"; filter:alpha(opacity="+100*o.border[1]+"); top:-"+o.border[0]+"px; left:-"+o.border[0]+"px;";o.border[0]&&(l='<div id="xubox_border'+t+'" class="xubox_border" style="'+u+'"></div>'),!o.maxmin||1!==o.type&&2!==o.type||/^\d+%$/.test(o.area[0])&&/^\d+%$/.test(o.area[1])||(p='<a class="xubox_min" href="javascript:;"><cite></cite></a><a class="xubox_max xulayer_png32" href="javascript:;"></a>'),o.closeBtn[1]&&(p+='<a class="xubox_close xulayer_png32 xubox_close'+o.closeBtn[0]+'" href="javascript:;" style="'+(4===o.type?"position:absolute; right:-3px; _right:7px; top:-4px;":"")+'"></a>');var h="object"==typeof o.title;return o.title&&(d='<div class="xubox_title" style="'+(h?o.title[1]:"")+'"><em>'+(h?o.title[0]:o.title)+"</em></div>"),[n,'<div times="'+t+'" showtime="'+o.time+'" style="z-index:'+c+'" id="'+a[0]+t+'" class="'+a[0]+'"><div style="background-color:'+o.bgcolor+"; z-index:"+c+'" class="xubox_main">'+r[o.type]+d+'<span class="xubox_setwin">'+p+'</span><span class="xubox_botton"></span></div>'+l+"</div>"]},r.pt.creat=function(){var e=this,t="",i=e.config,s=i.dialog,r=e.index,n=i.page,l=o("body"),c=function(i){i=i||"";t=e.space(i),l.append(o(t[0]))};switch(i.type){case 0:i.title||(i.area=["auto","auto"]),o(".xubox_dialog")[0]&&layer.close(o(".xubox_dialog").parents("."+a[0]).attr("times"));break;case 1:if(""!==n.html)c('<div class="xuboxPageHtml">'+n.html+"</div>"),l.append(o(t[1]));else if(""!==n.url)c('<div class="xuboxPageHtml" id="xuboxPageHtml'+r+'">'+n.html+"</div>"),l.append(o(t[1])),o.get(n.url,function(e){o("#xuboxPageHtml"+r).html(e.toString()),n.ok&&n.ok(e)});else{if(0!=o(n.dom).parents(a[4]).length)return;c(),o(n.dom).show().wrap(o(t[1]))}break;case 3:i.title=!1,i.area=["auto","auto"],i.closeBtn=["",!1],o(".xubox_loading")[0]&&layer.closeLoad();break;case 4:i.title=!1,i.area=["auto","auto"],i.fix=!1,i.border=[0],i.tips.more||layer.closeTips()}1!==i.type&&(c(),l.append(o(t[1])));var f=e.layerE=o("#"+a[0]+r);if(f.css({width:i.area[0],height:i.area[1]}),i.fix||f.css({position:"absolute"}),i.title&&(3!==i.type||4!==i.type)){var d=0===i.type?s:i,p=f.find(".xubox_botton");switch(d.btn=i.btn||s.btn,d.btns){case 0:p.html("").hide();break;case 1:p.html('<a href="javascript:;" class="xubox_yes xubox_botton1">'+d.btn[0]+"</a>");break;case 2:p.html('<a href="javascript:;" class="xubox_yes xubox_botton2">'+d.btn[0]+'</a><a href="javascript:;" class="xubox_no xubox_botton3">'+d.btn[1]+"</a>")}}"auto"===f.css("left")?(f.hide(),setTimeout(function(){f.show(),e.set(r)},500)):e.set(r),i.time<=0||e.autoclose(),e.callback()},s.fade=function(e,t,o){e.css({opacity:0}).animate({opacity:o},t)},r.pt.offset=function(){var e=this.config,t=this.layerE.outerHeight();""===e.offset[0]&&t<i.height()?this.offsetTop=(i.height()-t-2*e.border[0])/2:-1!=e.offset[0].indexOf("px")?this.offsetTop=parseFloat(e.offset[0]):this.offsetTop=parseFloat(e.offset[0]||0)/100*i.height(),this.offsetTop=this.offsetTop+e.border[0]+(e.fix?0:i.scrollTop()),-1!=e.offset[1].indexOf("px")?this.offsetLeft=parseFloat(e.offset[1])+e.border[0]:(e.offset[1]=""===e.offset[1]?"50%":e.offset[1],"50%"===e.offset[1]?this.offsetLeft=e.offset[1]:this.offsetLeft=parseFloat(e.offset[1])/100*i.width()+e.border[0])},r.pt.set=function(e){var t=this.config,r=(t.dialog,t.page),n=(t.loading,this.layerE),l=n.find(a[2]);switch(this.autoArea(e),t.title?0===t.type&&layer.ie6&&l.css({width:n.outerWidth()}):4!==t.type&&n.find(".xubox_close").addClass("xubox_close1"),n.attr({type:s.type[t.type]}),this.offset(),4!==t.type&&(t.shift&&!layer.ie6?"object"==typeof t.shift?this.shift(t.shift[0],t.shift[1]||500,t.shift[2]):this.shift(t.shift,500):n.css({top:this.offsetTop,left:this.offsetLeft})),t.type){case 0:n.find(a[5]).css({"background-color":"#fff"}),t.title?n.find(a[3]).css({paddingTop:15+l.outerHeight()}):(n.find(".xubox_msgico").css({top:8}),n.find(a[3]).css({marginTop:11}));break;case 1:n.find(r.dom).addClass("layer_pageContent"),t.shade[0]&&n.css({zIndex:t.zIndex+1}),t.title&&n.find(a[4]).css({top:l.outerHeight()});break;case 2:var c=n.find("."+a[1]),f=n.height();c.addClass("xubox_load").css({width:n.width()}),t.title?c.css({top:l.height(),height:f-l.height()}):c.css({top:0,height:f}),layer.ie6&&c.attr("src",t.iframe.src);break;case 4:var d=[0,n.outerHeight()],p=o(t.tips.follow),u={width:p.outerWidth(),height:p.outerHeight(),top:p.offset().top,left:p.offset().left},h=n.find(".layerTipsG");t.tips.isGuide||h.remove(),n.outerWidth()>t.maxWidth&&n.width(t.maxWidth),u.tipColor=t.tips.style[1],d[0]=n.outerWidth(),u.autoLeft=function(){u.left+d[0]-i.width()>0?(u.tipLeft=u.left+u.width-d[0],h.css({right:12,left:"auto"})):u.tipLeft=u.left},u.where=[function(){u.autoLeft(),u.tipTop=u.top-d[1]-10,h.removeClass("layerTipsB").addClass("layerTipsT").css({"border-right-color":u.tipColor})},function(){u.tipLeft=u.left+u.width+10,u.tipTop=u.top,h.removeClass("layerTipsL").addClass("layerTipsR").css({"border-bottom-color":u.tipColor})},function(){u.autoLeft(),u.tipTop=u.top+u.height+10,h.removeClass("layerTipsT").addClass("layerTipsB").css({"border-right-color":u.tipColor})},function(){u.tipLeft=u.left-d[0]+10,u.tipTop=u.top,h.removeClass("layerTipsR").addClass("layerTipsL").css({"border-bottom-color":u.tipColor})}],u.where[t.tips.guide](),0===t.tips.guide?u.top-(i.scrollTop()+d[1]+16)<0&&u.where[2]():1===t.tips.guide?i.width()-(u.left+u.width+d[0]+16)>0||u.where[3]():2===t.tips.guide?u.top-i.scrollTop()+u.height+d[1]+16-i.height()>0&&u.where[0]():3===t.tips.guide?d[0]+16-u.left>0&&u.where[1]():t.tips.guide,n.css({left:u.tipLeft,top:u.tipTop})}t.fadeIn&&(s.fade(n,t.fadeIn,1),s.fade(o("#xubox_shade"+e),t.fadeIn,t.shade[0])),t.fix&&""===t.offset[0]&&!t.shift&&i.on("resize",function(){n.css({top:(i.height()-n.outerHeight())/2})}),this.move()},r.pt.shift=function(e,t,o){var s=this.config,a=this.layerE,r=0,n=i.width(),l=i.height()+(s.fix?0:i.scrollTop());r="50%"==s.offset[1]||""==s.offset[1]?a.outerWidth()/2:a.outerWidth();var c={t:{top:this.offsetTop},b:{top:l-a.outerHeight()-s.border[0]},cl:r+s.border[0],ct:-a.outerHeight(),cr:n-r-s.border[0]};switch(e){case"left-top":a.css({left:c.cl,top:c.ct}).animate(c.t,t);break;case"top":a.css({top:c.ct}).animate(c.t,t);break;case"right-top":a.css({left:c.cr,top:c.ct}).animate(c.t,t);break;case"right-bottom":a.css({left:c.cr,top:l}).animate(o?c.t:c.b,t);break;case"bottom":a.css({top:l}).animate(o?c.t:c.b,t);break;case"left-bottom":a.css({left:c.cl,top:l}).animate(o?c.t:c.b,t);break;case"left":a.css({left:-a.outerWidth()}).animate({left:this.offsetLeft},t)}},r.pt.autoArea=function(e){e=e||this.index;var t,i=this.config,s=i.page,r=o("#"+a[0]+e),n=r.find(a[2]),l=r.find(a[5]),c=i.title?n.innerHeight():0,f=0;switch("auto"===i.area[0]&&l.outerWidth()>=i.maxWidth&&r.css({width:i.maxWidth}),i.type){case 0:var d=r.find(".xubox_botton>a");t=r.find(a[3]).outerHeight()+20,d.length>0&&(f=d.outerHeight()+20);break;case 1:var p=r.find(a[4]);t=o(s.dom).outerHeight(),"auto"===i.area[0]&&r.css({width:p.outerWidth()}),""===s.html&&""===s.url||(t=p.outerHeight());break;case 2:r.find("iframe").css({width:r.outerWidth(),height:r.outerHeight()-(i.title?n.innerHeight():0)});break;case 3:var u=r.find(".xubox_loading");t=u.outerHeight(),l.css({width:u.width()})}"auto"===i.area[1]&&l.css({height:c+t+f}),o("#xubox_border"+e).css({width:r.outerWidth()+2*i.border[0],height:r.outerHeight()+2*i.border[0]}),layer.ie6&&"auto"!==i.area[0]&&l.css({width:r.outerWidth()}),"50%"!==i.offset[1]&&""!=i.offset[1]||4===i.type?r.css({marginLeft:0}):r.css({marginLeft:-r.outerWidth()/2})},r.pt.move=function(){var e=this.config,t={setY:0,moveLayer:function(){if(0==parseInt(t.layerE.css("margin-left")))var e=parseInt(t.move.css("left"));else e=parseInt(t.move.css("left"))+-parseInt(t.layerE.css("margin-left"));"fixed"!==t.layerE.css("position")&&(e-=t.layerE.parent().offset().left,t.setY=0),t.layerE.css({left:e,top:parseInt(t.move.css("top"))-t.setY})}},s=this.layerE.find(e.move);e.move&&s.attr("move","ok"),e.move?s.css({cursor:"move"}):s.css({cursor:"auto"}),o(e.move).on("mousedown",function(s){if(s.preventDefault(),"ok"===o(this).attr("move")){t.ismove=!0,t.layerE=o(this).parents("."+a[0]);var r=t.layerE.offset().left,n=t.layerE.offset().top,l=t.layerE.width()-6,c=t.layerE.height()-6;o("#xubox_moves")[0]||o("body").append('<div id="xubox_moves" class="xubox_moves" style="left:'+r+"px; top:"+n+"px; width:"+l+"px; height:"+c+'px; z-index:2147483584"></div>'),t.move=o("#xubox_moves"),e.moveType&&t.move.css({opacity:0}),t.moveX=s.pageX-t.move.position().left,t.moveY=s.pageY-t.move.position().top,"fixed"!==t.layerE.css("position")||(t.setY=i.scrollTop())}}),o(document).mousemove(function(o){if(t.ismove){var s=o.pageX-t.moveX,a=o.pageY-t.moveY;if(o.preventDefault(),!e.moveOut){t.setY=i.scrollTop();var r=i.width()-t.move.outerWidth()-e.border[0],n=e.border[0]+t.setY;s<e.border[0]&&(s=e.border[0]),s>r&&(s=r),a<n&&(a=n),a>i.height()-t.move.outerHeight()-e.border[0]+t.setY&&(a=i.height()-t.move.outerHeight()-e.border[0]+t.setY)}t.move.css({left:s,top:a}),e.moveType&&t.moveLayer(),s=null,a=null,r=null,n=null}}).mouseup(function(){try{t.ismove&&(t.moveLayer(),t.move.remove()),t.ismove=!1}catch(e){t.ismove=!1}e.moveEnd&&e.moveEnd()})},r.pt.autoclose=function(){var e=this,t=e.config.time;e.autotime=setInterval(function(){0==--t&&(layer.close(e.index),clearInterval(e.autotime))},1e3)},s.config={end:{}},r.pt.callback=function(){var e=this,t=e.layerE,i=e.config,a=i.dialog;e.openLayer(),e.config.success(t,e.index),layer.ie6&&e.IE6(t,e.index),t.find(".xubox_close").on("click",function(){i.close(e.index),layer.close(e.index)}),t.find(".xubox_yes").on("click",function(){i.yes?i.yes(e.index):a.yes(e.index)}),t.find(".xubox_no").on("click",function(){i.no?i.no(e.index):a.no(e.index),layer.close(e.index)}),e.config.shadeClose&&o("#xubox_shade"+e.index).on("click",function(){layer.close(e.index)}),t.find(".xubox_min").on("click",function(){layer.min(e.index,i),i.min&&i.min(t)}),t.find(".xubox_max").on("click",function(){o(this).hasClass("xubox_maxmin")?(layer.restore(e.index),i.restore&&i.restore(t)):(layer.full(e.index,i),i.full&&i.full(t))}),s.config.end[e.index]=i.end},s.reselect=function(){o.each(o("select"),function(e,t){var i=o(this);i.parents("."+a[0])[0]||1==i.attr("layer")&&o("."+a[0]).length<1&&i.removeAttr("layer").show(),i=null})},r.pt.IE6=function(e){var t=e.offset().top;if(this.config.fix)var s=function(){e.css({top:i.scrollTop()+t})};else s=function(){e.css({top:t})};s(),i.scroll(s),o.each(o("select"),function(e,t){var i=o(this);i.parents("."+a[0])[0]||"none"==i.css("display")||i.attr({layer:"1"}).hide(),i=null})},r.pt.openLayer=function(){var e=this;e.layerE;layer.autoArea=function(t){return e.autoArea(t)},layer.shift=function(t,o,i){e.shift(t,o,i)},layer.setMove=function(){return e.move()},layer.zIndex=e.config.zIndex,layer.setTop=function(e){return layer.zIndex=parseInt(e[0].style.zIndex),e.on("mousedown",function(){layer.zIndex++,e.css("z-index",layer.zIndex+1)}),layer.zIndex}},s.isauto=function(e,t,o){"auto"===t.area[0]&&(t.area[0]=e.outerWidth()),"auto"===t.area[1]&&(t.area[1]=e.outerHeight()),e.attr({area:t.area+","+o}),e.find(".xubox_max").addClass("xubox_maxmin")},s.rescollbar=function(e){a.html.attr("layer-full")==e&&(a.html[0].style.removeProperty?a.html[0].style.removeProperty("overflow"):a.html[0].style.removeAttribute("overflow"),a.html.removeAttr("layer-full"))},layer.getIndex=function(e){return o(e).parents("."+a[0]).attr("times")},layer.getChildFrame=function(e,t){return t=t||o("."+a[1]).parents("."+a[0]).attr("times"),o("#"+a[0]+t).find("."+a[1]).contents().find(e)},layer.getFrameIndex=function(e){return o(e?"#"+e:"."+a[1]).parents("."+a[0]).attr("times")},layer.iframeAuto=function(e){e=e||o("."+a[1]).parents("."+a[0]).attr("times");var t=layer.getChildFrame("body",e).outerHeight(),i=o("#"+a[0]+e),s=i.find(a[2]),r=0;s&&(r=s.height()),i.css({height:t+r});var n=-parseInt(o("#xubox_border"+e).css("top"));o("#xubox_border"+e).css({height:t+2*n+r}),o("#"+a[1]+e).css({height:t})},layer.iframeSrc=function(e,t){o("#"+a[0]+e).find("iframe").attr("src",t)},layer.area=function(e,t){var i=[o("#"+a[0]+e),o("#xubox_border"+e)],r=i[0].attr("type"),n=i[0].find(a[5]),l=i[0].find(a[2]);if(r===s.type[1]||r===s.type[2]){if(i[0].css(t),n.css({width:t.width,height:t.height}),r===s.type[2])i[0].find("iframe").css({width:t.width,height:l?t.height-l.innerHeight():t.height});"0px"!==i[0].css("margin-left")&&(t.hasOwnProperty("top")&&i[0].css({top:t.top-(i[1][0]?parseFloat(i[1].css("top")):0)}),t.hasOwnProperty("left")&&i[0].css({left:t.left+i[0].outerWidth()/2-(i[1][0]?parseFloat(i[1].css("left")):0)}),i[0].css({marginLeft:-i[0].outerWidth()/2})),i[1][0]&&i[1].css({width:parseFloat(t.width)-2*parseFloat(i[1].css("left")),height:parseFloat(t.height)-2*parseFloat(i[1].css("top"))})}},layer.min=function(e,t){var i=o("#"+a[0]+e),r=[i.position().top,i.position().left+parseFloat(i.css("margin-left"))];s.isauto(i,t,r),layer.area(e,{width:180,height:35}),i.find(".xubox_min").hide(),"page"===i.attr("type")&&i.find(a[4]).hide(),s.rescollbar(e)},layer.restore=function(e){var t=o("#"+a[0]+e),i=t.attr("area").split(",");t.attr("type");layer.area(e,{width:parseFloat(i[0]),height:parseFloat(i[1]),top:parseFloat(i[2]),left:parseFloat(i[3])}),t.find(".xubox_max").removeClass("xubox_maxmin"),t.find(".xubox_min").show(),"page"===t.attr("type")&&t.find(a[4]).show(),s.rescollbar(e)},layer.full=function(e,t){var r,n=o("#"+a[0]+e),l=2*t.border[0]||6,c=[n.position().top,n.position().left+parseFloat(n.css("margin-left"))];s.isauto(n,t,c),a.html.attr("layer-full")||a.html.css("overflow","hidden").attr("layer-full",e),clearTimeout(r),r=setTimeout(function(){layer.area(e,{top:"fixed"===n.css("position")?0:i.scrollTop(),left:"fixed"===n.css("position")?0:i.scrollLeft(),width:i.width()-l,height:i.height()-l})},100)},layer.title=function(e,t){o("#"+a[0]+(t||layer.index)).find(".xubox_title>em").html(e)},layer.close=function(e){var t=o("#"+a[0]+e),i=t.attr("type"),r=o("#xubox_moves, #xubox_shade"+e);if(t[0]){if(i==s.type[1])if(t.find(".xuboxPageHtml")[0])t[0].innerHTML="",t.remove();else{t.find(".xubox_setwin,.xubox_close,.xubox_botton,.xubox_title,.xubox_border").remove();for(var n=0;n<3;n++)t.find(".layer_pageContent").unwrap().hide()}else t[0].innerHTML="",t.remove();r.remove(),layer.ie6&&s.reselect(),s.rescollbar(e),"function"==typeof s.config.end[e]&&s.config.end[e](),delete s.config.end[e]}},layer.closeLoad=function(){layer.close(o(".xubox_loading").parents("."+a[0]).attr("times"))},layer.closeTips=function(){layer.closeAll("tips")},layer.closeAll=function(e){o.each(o("."+a[0]),function(){var t=o(this),i=e?t.attr("type")===e:1;i&&layer.close(t.attr("times")),i=null})},s.run=function(){o=jQuery,i=o(e),a.html=o("html"),layer.use("skin/layer.css"),o.layer=function(e){return new r(e).index},(new Image).src=layer.path+"skin/default/xubox_ico0.png"},"function"==typeof define?define(function(){return s.run(),layer}):s.run()}(window);
/*** dialog.js ***/
var mro=mro||{};mro.dialog=function(){function e(e,t,n,r,o,i){$.layer({type:1,fix:i||!1,move:!1,title:[e],area:[n,"auto"],page:{html:t},success:function(e,t){null!=r&&(r.fireWith(e,[t]),r.empty()),layer.autoArea(t),$(".xubox_main").css("height","auto"),$(e).find(".xubox_close").focus(),$(e).find(".btn-cancel").click(function(){layer.close(t)}),o&&$.enable(o)}})}return{openDialog:function(t,n,r,o,i,l){$.ajax({url:t,type:"GET",async:!1}).done(function(t){SimpleTool.hasAjaxException(t,null)||e(n,t,r+"px",o,i,l)})},closeDialog:function(e){layer.close(e)},createLayer:e,createImgLayer:function(e){$.layer({type:1,area:["auto","auto"],closeBtn:[1,!0],maxWidth:"70%",title:!1,border:[0],page:{html:e}})}}}(),mro.formDialog=function(){function e(e){var t=$("#mio-dg-wrap"+e),n=$("#mio-dg-shade"+e);t.find(".close-dialog").click(function(){t.slideUp(300,function(){t.remove(),n.remove(),mro.scrollEvent.enableScroll()})})}return{openDialog:function(t,n,r,o){$.ajax({url:t,type:"GET",async:!1}).done(function(t){var i=1e4,l=900,a=$.extend({},{header:{height:45,line_height:50,border_bottom:"1px solid #eaebec",background:"#f5f5f5",padding_left:30,padding_right:30},btns:{btnShow:"true",btnWrap:{height:45,line_height:45,margin_left:10},title:{titleTxt:""},btnArr:[{txt:"提交",classClick:"dg-btn-save",btnColor:"dg-btn-blue"}],btnClass:"dg-btn"},dg_wrap:{background:"#fff"}},o);parseInt(n)>0&&(l=n),$(".mro-wrapper").find(".mio-dg-wrap").length>0&&(i+=$(".mro-wrapper").find(".mio-dg-wrap").length);var d="mio-dg-wrap"+i,c="mio-dg-shade"+i,s="dg-content-wrapout"+i,h=document.documentElement.clientHeight-parseInt(50+parseInt(a.header.height))+"px";$(window).resize(function(){h=document.documentElement.clientHeight-parseInt(50+parseInt(a.header.height))+"px",$("#"+s).css("height",h)});var g="right:10px;width:"+l+"px !important;margin-left:"+(1280-l)+"px !important;",m="width:100%;height:"+h+";overflow:hidden;background:"+a.dg_wrap.background+";",u="height:"+a.header.height+"px;line-height:"+a.header.line_height+"px;border-bottom:"+a.header.border_bottom+";background:"+a.header.background+";padding-left:"+a.header.padding_left+"px;padding-right:"+a.header.padding_right+"px;",b=(a.btns.btnWrap.height,a.btns.btnWrap.line_height,a.btns.btnWrap.margin_left,"");if("true"==a.btns.btnShow&&a.btns.btnArr.length>0)for(var p=0;p<a.btns.btnArr.length;p++)b+='<a href="javascript:;" '+(a.btns.btnArr[p].action?' data-action="'+a.btns.btnArr[p].action+'" ':"")+' class="'+a.btns.btnClass+" "+a.btns.btnArr[p].btnColor+" "+a.btns.btnArr[p].classClick+'">'+a.btns.btnArr[p].txt+"</a>";var f="";a.title.titleTxt.length>0&&(f='<span class="f14" style="position: absolute;top:-3px;left: 40%;">'+a.title.titleTxt+"</span>");var v=$('<div class="mio-dg-wrap" style="'+g+'" id="'+d+'" data-index="'+i+'"><div class="dg-header" style="'+u+'"><i class="close-btn close-dialog"></i>'+f+'<div class="btn-wrapout" style="float: right;line-height: 40px;margin-top: 3px;">'+b+'</div></div><div class="dg-content-wrapout" style="'+m+'" id="'+s+'"><div class="dg-content">'+t+"</div></div></div>"),w=$('<div class="mio-dg-shade" id="'+c+'"></div>');$(".mro-wrapper").append(w,v),w.show(),v.slideDown(300,function(){var t=$("#"+s);t.mCustomScrollbar({scrollEasing:"linear",scrollInertia:300}),t.find(".mCSB_dragger:hover").css("background-color","#ccc"),t.find(".mCSB_draggerRail").css({width:"1px","background-color":"#ccc"}),t.find(".mCSB_dragger_bar").css({width:"6px","background-color":"#ccc"}),t.find(".mCSB_scrollTools .mCSB_dragger .mCSB_dragger_bar").css({"margin-right":"1px"}),t.find(".mCSB_scrollTools .mCSB_draggerRail").css({"margin-right":"3px"}),t.hover(function(){mro.scrollEvent.disableScroll()},function(){mro.scrollEvent.enableScroll()}),null!=r&&(r.fireWith($("#"+d),[i]),r.empty(),e(i)),a.selector&&a.selector.length>0&&$.enable(a.selector)})})},closeCurrentDg:e,closeAllDg:function(){$(".mio-dg-wrap").slideUp(300,function(){$(".mio-dg-wrap").remove(),$(".mio-dg-shade").remove(),mro.scrollEvent.enableScroll()})},close:function(e){var t=$("#mio-dg-wrap"+e),n=$("#mio-dg-shade"+e);t.slideUp(300,function(){t.remove(),n.remove(),mro.scrollEvent.enableScroll()})},setOption:function(e){return{header:{height:e.hh||45,line_height:e.hlh||50,border_bottom:e.hbb||"1px solid #eaebec",background:e.hbgc||"#fff",padding_left:e.hpl||30,padding_right:e.hr||30},title:{titleTxt:e.titleTxt||""},btns:{btnShow:e.btnShow||"true",btnWrap:{height:e.btnwh||45,line_height:e.btnwlh||45,margin_left:e.btnwml||10},btnArr:e.btnArr||[{txt:"提交",classClick:"dg-btn-save",btnColor:"dg-btn-blue"}],btnClass:"dg-btn"},dg_wrap:{background:e.bgc||"#fff"},selector:e.selector}}}}(),mro.scrollEvent=function(){function e(){return!1}function t(e){return!1}return{enableScroll:function(){document.addEventListener?(document.addEventListener("mousewheel",e,!1),document.addEventListener("wheel",e,!1),document.addEventListener("DOMMouseScroll",e,!1),document.removeEventListener("mousewheel",t,!1),document.removeEventListener("wheel",t,!1),document.removeEventListener("DOMMouseScroll",t,!1)):(document.attachEvent("onmousewheel",e),document.detachEvent("onmousewheel",t))},disableScroll:function(){document.addEventListener?(document.addEventListener("mousewheel",t,!1),document.addEventListener("wheel",t,!1),document.addEventListener("DOMMouseScroll",t,!1),document.removeEventListener("mousewheel",e,!1),document.removeEventListener("wheel",e,!1),document.removeEventListener("DOMMouseScroll",e,!1)):(document.attachEvent("onmousewheel",t),document.detachEvent("onmousewheel",e))}}}();
/*** validation.js ***/
function Validator(){this.initialize()}function $F(i){return $("#"+i).val()}function $IsEmpty(i){return""==i||null==i||0==i.length||/^\s+$/.test(i)}function Validation(i,t){this.initialize(i,t)}function removeDelimiters(i){return i=(i=i.replace(/\s/g,"")).replace(/\-/g,"")}function parseNumber(i){if("string"!=typeof i)return parseFloat(i);var t=i.indexOf("."),e=i.indexOf(",");return-1!=t&&-1!=e?i=e>t?i.replace(".","").replace(",","."):i.replace(",",""):-1!=e&&(i=i.replace(",",".")),parseFloat(i)}Validator.prototype={initialize:function(){this.error="验证失败。"},test:function(i){var t=Validator.methods;for(var e in i.siblings(".validation-advice").remove(),t)if(i.hasClass(t[e][0])&&!t[e][2](i.val())){var n='<div class="validation-advice" id="advice-'+t[e][0]+"-"+i.id+'" style="display:block">'+t[e][1]+"</div>";i.after(n);break}}},Validator.methods=[["required-entry","必填项",function(i){return!$IsEmpty(i)}]],Validation.defaultOptions={containerClassName:".input-box"},Validation.prototype={initialize:function(i,t){this.form=$("#"+i),this.form},onChange:function(i){Validation.isOnChange=!1},onSubmit:function(i){if(!this.validate())return!1},validate:function(){var i=!1;try{this.form.find("input,select,textarea,file").each(function(i,t){var e=$(this);(new Validator).test(e)}),0==this.form.find(".validation-advice").length&&(i=!0)}catch(i){console.log(i)}return i},reset:function(){},isVisible:function(i){return!0},createAdvice:function(i,t,e,n){},get:function(i){return Validation.methods[i]?Validation.methods[i]:null},addAllThese:function(i){}};
/*** datepicker.js ***/
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(Nt){"use strict";Nt.Zebra_DatePicker=function(t,M){function e(t){var e,s,i,a,n={days:["d","j","D"],months:["F","m","M","n","t"],years:["o","Y","y"],hours:["G","g","H","h"],minutes:["i"],seconds:["s"],ampm:["A","a"]},r=null,o=!1;for(i=0;i<3;i++)yt+=Math.floor(65536*(1+Math.random())).toString(16);if(L=[],T=[],!t)for(e in kt.settings=Nt.extend({},ut,Nt.fn.Zebra_DatePicker.defaults,M),ft.readonly=Dt.attr("readonly"),ft.style=Dt.attr("style"),ft.padding_left=parseInt(Dt.css("paddingLeft"),10)||0,ft.padding_right=parseInt(Dt.css("paddingRight"),10)||0,Dt.data())0===e.indexOf("zdp_")&&(e=e.replace(/^zdp\_/,""),void 0!==ut[e]&&(kt.settings[e]="pair"===e?Nt(Dt.data("zdp_"+e)):Dt.data("zdp_"+e)));for(kt.settings.readonly_element?Dt.attr("readonly","readonly"):Dt.removeAttr("readonly"),lt=!1,ht=[];!o;){for(r in n)Nt.each(n[r],function(t,e){var s,i;if(-1<kt.settings.format.indexOf(e))if("days"===r)ht.push("days");else if("months"===r)ht.push("months");else if("years"===r)ht.push("years");else if(("hours"===r||"minutes"===r||"seconds"===r||"ampm"===r)&&!kt.settings.disable_time_picker)if(lt||(lt={is12hour:!1},ht.push("time")),"hours"===r)for("g"===(lt.hour_format=e)||"h"===e?(i=12,lt.is12hour=!0):i=24,lt.hours=[],Nt.isArray(kt.settings.enabled_hours)&&(kt.settings.enabled_hour=kt.settings.enabled_hours.map(function(t){return parseInt(t,10)})),s=12===i?1:0;s<(12===i?13:i);s++)(!Nt.isArray(kt.settings.enabled_hours)||-1<Nt.inArray(s,kt.settings.enabled_hours))&&lt.hours.push(s);else if("minutes"===r)for(lt.minutes=[],Nt.isArray(kt.settings.enabled_minutes)&&(kt.settings.enabled_minutes=kt.settings.enabled_minutes.map(function(t){return parseInt(t,10)})),s=0;s<60;s++)(!Nt.isArray(kt.settings.enabled_minutes)||-1<Nt.inArray(s,kt.settings.enabled_minutes))&&lt.minutes.push(s);else if("seconds"===r)for(lt.seconds=[],Nt.isArray(kt.settings.enabled_seconds)&&(kt.settings.enabled_seconds=kt.settings.enabled_seconds.map(function(t){return parseInt(t,10)})),s=0;s<60;s++)(!Nt.isArray(kt.settings.enabled_seconds)||-1<Nt.inArray(s,kt.settings.enabled_seconds))&&lt.seconds.push(s);else lt.ampm=["am","pm"]});lt.hour_format&&lt.ampm&&!1===lt.is12hour?kt.settings.format=kt.settings.format.replace(lt.hour_format,lt.hour_format.toLowerCase()):o=!0}for(i in 0===ht.length&&(ht=["years","months","days"]),-1===Nt.inArray(kt.settings.view,ht)&&(kt.settings.view=ht[ht.length-1]),I=[],kt.settings.custom_classes)kt.settings.custom_classes.hasOwnProperty(i)&&-1===I.indexOf(i)&&I.push(i);for(a=0;a<2+I.length;a++)s=0===a?kt.settings.disabled_dates:1===a?kt.settings.enabled_dates:kt.settings.custom_classes[I[a-2]],Nt.isArray(s)&&0<s.length&&Nt.each(s,function(){var t,e,s,i,n=this.split(" ");for(t=0;t<4;t++){for(n[t]||(n[t]="*"),n[t]=-1<n[t].indexOf(",")?n[t].split(","):new Array(n[t]),e=0;e<n[t].length;e++)if(-1<n[t][e].indexOf("-")&&null!==(i=n[t][e].match(/^([0-9]+)\-([0-9]+)/))){for(s=It(i[1]);s<=It(i[2]);s++)-1===Nt.inArray(s,n[t])&&n[t].push(s+"");n[t].splice(e,1)}for(e=0;e<n[t].length;e++)n[t][e]=isNaN(It(n[t][e]))?n[t][e]:It(n[t][e])}0===a?L.push(n):1===a?T.push(n):(void 0===mt[I[a-2]]&&(mt[I[a-2]]=[]),mt[I[a-2]].push(n))});var d,c,l=!1!==kt.settings.current_date?new Date(kt.settings.current_date):new Date,g=kt.settings.reference_date?kt.settings.reference_date:Dt.data("zdp_reference_date")&&void 0!==Dt.data("zdp_reference_date")?Dt.data("zdp_reference_date"):l;if(R=ot=void 0,B=g.getMonth(),x=l.getMonth(),E=g.getFullYear(),Y=l.getFullYear(),W=g.getDate(),S=l.getDate(),!0===kt.settings.direction)ot=g;else if(!1===kt.settings.direction)V=(R=g).getMonth(),$=R.getFullYear(),U=R.getDate();else if(!Nt.isArray(kt.settings.direction)&&Ft(kt.settings.direction)&&0<It(kt.settings.direction)||Nt.isArray(kt.settings.direction)&&((d=At(kt.settings.direction[0]))||!0===kt.settings.direction[0]||Ft(kt.settings.direction[0])&&0<kt.settings.direction[0])&&((c=At(kt.settings.direction[1]))||!1===kt.settings.direction[1]||Ft(kt.settings.direction[1])&&0<=kt.settings.direction[1]))ot=d||new Date(E,B,W+(Nt.isArray(kt.settings.direction)?It(!0===kt.settings.direction[0]?0:kt.settings.direction[0]):It(kt.settings.direction))),B=ot.getMonth(),E=ot.getFullYear(),W=ot.getDate(),c&&+ot<=+c?R=c:!c&&!1!==kt.settings.direction[1]&&Nt.isArray(kt.settings.direction)&&(R=new Date(E,B,W+It(kt.settings.direction[1]))),R&&(V=R.getMonth(),$=R.getFullYear(),U=R.getDate());else if(!Nt.isArray(kt.settings.direction)&&Ft(kt.settings.direction)&&It(kt.settings.direction)<0||Nt.isArray(kt.settings.direction)&&(!1===kt.settings.direction[0]||Ft(kt.settings.direction[0])&&kt.settings.direction[0]<0)&&((d=At(kt.settings.direction[1]))||Ft(kt.settings.direction[1])&&0<=kt.settings.direction[1]))R=new Date(E,B,W+(Nt.isArray(kt.settings.direction)?It(!1===kt.settings.direction[0]?0:kt.settings.direction[0]):It(kt.settings.direction))),V=R.getMonth(),$=R.getFullYear(),U=R.getDate(),d&&+d<+R?ot=d:!d&&Nt.isArray(kt.settings.direction)&&(ot=new Date($,V,U-It(kt.settings.direction[1]))),ot&&(B=ot.getMonth(),E=ot.getFullYear(),W=ot.getDate());else if(Nt.isArray(kt.settings.disabled_dates)&&0<kt.settings.disabled_dates.length)for(var _ in L)if(-1<Nt.inArray("*",L[_][0])&&-1<Nt.inArray("*",L[_][1])&&-1<Nt.inArray("*",L[_][2])&&-1<Nt.inArray("*",L[_][3])){var h=[];if(Nt.each(T,function(){var t=this;"*"!==t[2][0]&&h.push(parseInt(t[2][0]+("*"===t[1][0]?"12":Yt(t[1][0],2))+("*"===t[0][0]?"*"===t[1][0]?"31":new Date(t[2][0],t[1][0],0).getDate():Yt(t[0][0],2)),10))}),h.sort(),0<h.length){var p=(h[0]+"").match(/([0-9]{4})([0-9]{2})([0-9]{2})/);E=parseInt(p[1],10),B=parseInt(p[2],10)-1,W=parseInt(p[3],10)}break}if(Pt(E,B,W)){for(;Pt(E);)B=ot?(E++,0):(E--,11);for(;Pt(E,B);)W=ot?(B++,1):(B--,new Date(E,B+1,0).getDate()),11<B?(E++,B=0,W=1):B<0&&(E--,B=11,W=new Date(E,B+1,0).getDate());for(;Pt(E,B,W);)ot?W++:W--,l=new Date(E,B,W),E=l.getFullYear(),B=l.getMonth(),W=l.getDate();l=new Date(E,B,W),E=l.getFullYear(),B=l.getMonth(),W=l.getDate()}kt.settings.start_date&&"object"==typeof kt.settings.start_date&&kt.settings.start_date instanceof Date&&(kt.settings.start_date=Mt(kt.settings.start_date));var u=At(Dt.val()||(kt.settings.start_date?kt.settings.start_date:""));if(u&&kt.settings.strict&&Pt(u.getFullYear(),u.getMonth(),u.getDate())&&Dt.val(""),t||void 0===ot&&void 0===u||zt(void 0!==u?u:ot),!(kt.settings.always_visible instanceof jQuery)){if(!t){if(kt.settings.show_icon){"firefox"===jt.name&&Dt.is('input[type="text"]')&&"inline"===Dt.css("display")&&Dt.css("display","inline-block");var m=parseInt(Dt.css("marginTop"),10)||0,f=parseInt(Dt.css("marginRight"),10)||0,b=parseInt(Dt.css("marginBottom"),10)||0,y=parseInt(Dt.css("marginLeft"),10)||0,v=Nt('<span class="Zebra_DatePicker_Icon_Wrapper"></span>').css({display:Dt.css("display"),position:"static"===Dt.css("position")?"relative":Dt.css("position"),"float":Dt.css("float"),top:Dt.css("top"),right:Dt.css("right"),bottom:Dt.css("bottom"),left:Dt.css("left"),marginTop:m<0?m:0,marginRight:f<0?f:0,marginBottom:b<0?b:0,marginLeft:y<0?y:0,paddingTop:m,paddingRight:f,paddingBottom:b,paddingLeft:y});"block"===Dt.css("display")&&v.css("width",Dt.outerWidth(!0)),Dt.wrap(v).css({position:"relative","float":"none",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0}),G=Nt('<button type="button" class="Zebra_DatePicker_Icon'+("disabled"===Dt.attr("disabled")?" Zebra_DatePicker_Icon_Disabled":"")+'">Pick a date</button>'),kt.icon=G,F=kt.settings.open_icon_only?G:G.add(Dt)}else F=Dt;F.on("click.Zebra_DatePicker_"+yt+(kt.settings.open_on_focus?" focus.Zebra_DatePicker_"+yt:""),function(){z.hasClass("dp_hidden")&&!Dt.attr("disabled")&&(!vt||kt.settings.readonly_element?kt.show():(clearTimeout(dt),dt=setTimeout(function(){kt.show()},600)))}),F.on("keydown.Zebra_DatePicker_"+yt,function(t){9!==t.keyCode||z.hasClass("dp_hidden")||kt.hide()}),!kt.settings.readonly_element&&kt.settings.pair&&Dt.on("blur.Zebra_DatePicker_"+yt,function(){var t;(t=At(Nt(this).val()))&&!Pt(t.getFullYear(),t.getMonth(),t.getDate())&&zt(t)}),void 0!==G&&G.insertAfter(Dt)}if(void 0!==G){G.attr("style","");var w=Dt.outerWidth(),k=Dt.outerHeight(),D=G.outerWidth(),A=G.outerHeight();G.css("top",(k-A)/2),kt.settings.inside?"right"===kt.settings.icon_position?(G.css("right",!1!==kt.settings.icon_margin?kt.settings.icon_margin:ft.padding_right),Dt.css("paddingRight",2*(!1!==kt.settings.icon_margin?kt.settings.icon_margin:ft.padding_right)+D)):(G.css("left",!1!==kt.settings.icon_margin?kt.settings.icon_margin:ft.padding_left),Dt.css("paddingLeft",2*(!1!==kt.settings.icon_margin?kt.settings.icon_margin:ft.padding_left)+D)):G.css("left",w+(!1!==kt.settings.icon_margin?kt.settings.icon_margin:ft.padding_left)),G.removeClass("Zebra_DatePicker_Icon_Disabled"),"disabled"===Dt.attr("disabled")&&G.addClass("Zebra_DatePicker_Icon_Disabled")}}if(rt=!1!==kt.settings.show_select_today&&-1<Nt.inArray("days",ht)&&!Pt(Y,x,S)&&kt.settings.show_select_today,t)return Nt(".dp_previous",z).html(kt.settings.navigation[0]),Nt(".dp_next",z).html(kt.settings.navigation[1]),Nt(".dp_time_controls_increase .dp_time_control",z).html(kt.settings.navigation[2]),Nt(".dp_time_controls_decrease .dp_time_control",z).html(kt.settings.navigation[3]),Nt(".dp_clear",z).html(kt.settings.lang_clear_date),Nt(".dp_today",z).html(kt.settings.show_select_today),void(z.is(":visible")&&(i=kt.settings.view,kt.settings.view=_t,kt.show(!1),kt.settings.view=i));Nt(window).on("resize.Zebra_DatePicker_"+yt+", orientationchange.Zebra_DatePicker_"+yt,function(){kt.hide()});var C='<div class="Zebra_DatePicker"><table class="dp_header dp_actions"><tr><td class="dp_previous">'+kt.settings.navigation[0]+(wt?"&#xFE0E;":"")+'</td><td class="dp_caption"></td><td class="dp_next">'+kt.settings.navigation[1]+(wt?"&#xFE0E;":"")+'</td></tr></table><table class="dp_daypicker'+(kt.settings.show_week_number?" dp_week_numbers":"")+' dp_body"></table><table class="dp_monthpicker dp_body"></table><table class="dp_yearpicker dp_body"></table><table class="dp_timepicker dp_body"></table><table class="dp_footer dp_actions"><tr><td class="dp_today">'+rt+'</td><td class="dp_clear">'+kt.settings.lang_clear_date+'</td><td class="dp_view_toggler dp_icon">&nbsp;&nbsp;&nbsp;&nbsp;</td><td class="dp_confirm dp_icon"></td></tr></table></div>';z=Nt(C),J=Nt("table.dp_header",z),j=Nt("table.dp_daypicker",z),q=Nt("table.dp_monthpicker",z),gt=Nt("table.dp_yearpicker",z),ct=Nt("table.dp_timepicker",z),Q=Nt("table.dp_footer",z),at=Nt("td.dp_today",Q),P=Nt("td.dp_clear",Q),st=Nt("td.dp_view_toggler",Q),Z=Nt("td.dp_confirm",Q),kt.settings.always_visible instanceof jQuery?Dt.attr("disabled")||(kt.settings.always_visible.append(z),kt.show()):kt.settings.container.append(z),z.on("mouseover","td:not(.dp_disabled)",function(){Nt(this).addClass("dp_hover")}).on("mouseout","td:not(.dp_disabled)",function(){Nt(this).removeClass("dp_hover")}),Ct(z),Nt(kt.settings.rtl?".dp_next":".dp_previous",J).on("click",function(){"months"===_t?nt--:"years"===_t?nt-=12:--it<0&&(it=11,nt--),Zt()}),kt.settings.fast_navigation&&Nt(".dp_caption",J).on("click",function(){_t="days"===_t?-1<Nt.inArray("months",ht)?"months":-1<Nt.inArray("years",ht)?"years":"days":"months"===_t?-1<Nt.inArray("years",ht)?"years":-1<Nt.inArray("days",ht)?"days":"months":-1<Nt.inArray("days",ht)?"days":-1<Nt.inArray("months",ht)?"months":"years",Zt()}),Nt(kt.settings.rtl?".dp_previous":".dp_next",J).on("click",function(){"months"===_t?nt++:"years"===_t?nt+=12:12==++it&&(it=0,nt++),Zt()}),j.on("click","td:not(.dp_disabled)",function(){var t;kt.settings.select_other_months&&Nt(this).attr("class")&&null!==(t=Nt(this).attr("class").match(/date\_([0-9]{4})(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])/))?xt(t[1],t[2]-1,t[3],"days",Nt(this)):xt(nt,it,It(Nt(this).html()),"days",Nt(this))}),q.on("click","td:not(.dp_disabled)",function(){var t=Nt(this).attr("class").match(/dp\_month\_([0-9]+)/);it=It(t[1]),-1===Nt.inArray("days",ht)?xt(nt,it,1,"months",Nt(this)):(_t="days",kt.settings.always_visible&&Dt.val(""),Zt())}),gt.on("click","td:not(.dp_disabled)",function(){nt=It(Nt(this).html()),-1===Nt.inArray("months",ht)?xt(nt,0,1,"years",Nt(this)):(_t="months",kt.settings.always_visible&&Dt.val(""),Zt())}),at.on("click",function(t){var e=!1!==kt.settings.current_date?new Date(kt.settings.current_date):new Date;t.preventDefault(),xt(e.getFullYear(),e.getMonth(),e.getDate(),"days",Nt(".dp_current",j))}),P.on("click",function(t){t.preventDefault(),Dt.val(""),O=H=N=null,kt.settings.always_visible?Nt("td.dp_selected",z).removeClass("dp_selected"):nt=it=null,Dt.focus(),kt.hide(),kt.settings.onClear&&"function"==typeof kt.settings.onClear&&kt.settings.onClear.call(Dt)}),st.on("click",function(){"time"!==_t?(_t="time",Zt()):Nt(".dp_caption",J).trigger("click")}),Z.on("click",function(){if(Nt(".dp_time_controls_increase td",ct).first().trigger("mousedown"),clearInterval(pt),Nt(".dp_time_controls_decrease td",ct).first().trigger("mousedown"),clearInterval(pt),kt.settings.onSelect&&"function"==typeof kt.settings.onSelect){var t=new Date(nt,it,N,lt&&lt.hours?X+(lt.ampm&&("pm"===et&&X<12||"am"===et&&12===X)?12:0):0,lt&&lt.minutes?K:0,lt&&lt.seconds?tt:0);kt.settings.onSelect.call(Dt,Mt(t),nt+"-"+Yt(it+1,2)+"-"+Yt(N,2)+(lt?" "+Yt(t.getHours(),2)+":"+Yt(t.getMinutes(),2)+":"+Yt(t.getSeconds(),2):""),t)}kt.hide()}),z.on("mousedown",".dp_time_controls_increase td, .dp_time_controls_decrease td",function(){var t=this,e=0;St(t),pt=setInterval(function(){St(t),5<++e&&(clearInterval(pt),pt=setInterval(function(){St(t),10<++e&&(clearInterval(pt),pt=setInterval(function(){St(t)},100,t))},200,t))},400,t)}),z.on("mouseup mouseleave",".dp_time_controls_increase td, .dp_time_controls_decrease td",function(){clearInterval(pt)}),kt.settings.always_visible instanceof jQuery||(Nt(document).on("touchmove.Zebra_DatePicker_"+yt,function(){bt=!0}),Nt(document).on("mousedown.Zebra_DatePicker_"+yt+" touchend.Zebra_DatePicker_"+yt,function(t){if("touchend"===t.type&&bt)return bt=!(vt=!0);bt=!1,z.hasClass("dp_hidden")||(!kt.settings.open_icon_only||!kt.icon||Nt(t.target).get(0)===kt.icon.get(0))&&(kt.settings.open_icon_only||Nt(t.target).get(0)===Dt.get(0)||kt.icon&&Nt(t.target).get(0)===kt.icon.get(0))||0!==Nt(t.target).closest(".Zebra_DatePicker").length||Nt(t.target).hasClass("dp_time_control")||kt.hide(!0)}),Nt(document).on("keyup.Zebra_DatePicker_"+yt,function(t){z.hasClass("dp_hidden")||27!==t.which||kt.hide()})),Zt()}function a(){var t,e,s,i,n,a,r,o,d,c,l,g,_=new Date(nt,it+1,0).getDate(),h=new Date(nt,it,1).getDay(),p=new Date(nt,it,0).getDate(),u=h-kt.settings.first_day_of_week;for(u=u<0?7+u:u,y(kt.settings.header_captions.days),e="<tr>",kt.settings.show_week_number&&(e+="<th>"+kt.settings.show_week_number+"</th>"),t=0;t<7;t++)s=(kt.settings.first_day_of_week+(kt.settings.rtl?6-t:t))%7,e+="<th>"+(Nt.isArray(kt.settings.days_abbr)&&void 0!==kt.settings.days_abbr[s]?kt.settings.days_abbr[s]:kt.settings.days[s].substr(0,2))+"</th>";for(e+="</tr><tr>",t=0;t<42;t++)g=kt.settings.rtl?6-t%7*2:0,0<t&&t%7==0&&(e+="</tr><tr>"),t%7==0&&kt.settings.show_week_number&&(e+="<th>"+b(new Date(nt,it,t-u+1))+"</th>"),s=t-u+1+g,kt.settings.select_other_months&&(t<u||_<s)&&(n=(i=new Date(nt,it,s)).getFullYear(),a=i.getMonth(),r=i.getDate(),i=n+Yt(a+1,2)+Yt(r,2)),o=(kt.settings.first_day_of_week+t)%7,l=-1<Nt.inArray(o,kt.settings.weekend_days),kt.settings.rtl&&s<1||!kt.settings.rtl&&t<u?e+='<td class="dp_not_in_month '+(l?"dp_weekend ":"")+(kt.settings.select_other_months&&!Pt(n,a,r)?"date_"+i:"dp_disabled")+'">'+(kt.settings.select_other_months||kt.settings.show_other_months?Yt(g+p-u+t+1,kt.settings.zero_pad?2:0):"&nbsp;")+"</td>":_<s?e+='<td class="dp_not_in_month '+(l?"dp_weekend ":"")+(kt.settings.select_other_months&&!Pt(n,a,r)?"date_"+i:"dp_disabled")+'">'+(kt.settings.select_other_months||kt.settings.show_other_months?Yt(s-_,kt.settings.zero_pad?2:0):"&nbsp;")+"</td>":(d="",c=f(nt,it,s),l&&(d=" dp_weekend"),it===x&&nt===Y&&S===s&&(d+=" dp_current"),""!==c&&(d+=" "+c),it===H&&nt===O&&N===s&&(d+=" dp_selected"),Pt(nt,it,s)&&(d+=" dp_disabled"),e+="<td"+(""!==d?' class="'+Nt.trim(d)+'"':"")+">"+((kt.settings.zero_pad?Yt(s,2):s)||"&nbsp;")+"</td>");e+="</tr>",j.html(Nt(e)),kt.settings.always_visible&&(m=Nt("td:not(.dp_disabled)",j)),j.show()}function g(t){var e,s;if("explorer"===jt.name&&6===jt.version)switch(i||(e=It(z.css("zIndex"))-1,i=Nt("<iframe>",{src:'javascript:document.write("")',scrolling:"no",frameborder:0,css:{zIndex:e,position:"absolute",top:-1e3,left:-1e3,width:z.outerWidth(),height:z.outerHeight(),filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)",display:"none"}}),Nt("body").append(i)),t){case"hide":i.hide();break;default:s=z.offset(),i.css({top:s.top,left:s.left,display:"block"})}}var P,F,Z,S,x,Y,I,z,j,m,N,H,O,L,T,R,W,B,E,Q,J,G,U,V,$,q,d,X,K,tt,et,st,it,nt,at,i,rt,ot,dt,ct,lt,gt,c,_t,ht,pt,ut={always_visible:!(this.version="1.9.14"),container:Nt("body"),current_date:!1,custom_classes:!1,days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],days_abbr:!1,default_position:"above",direction:0,disable_time_picker:!1,disabled_dates:!1,enabled_dates:!1,enabled_hours:!1,enabled_minutes:!1,enabled_seconds:!1,fast_navigation:!0,first_day_of_week:1,format:"Y-m-d",header_captions:{days:"F, Y",months:"Y",years:"Y1 - Y2"},icon_margin:!1,icon_position:"right",inside:!0,lang_clear_date:"Clear date",months:["January","February","March","April","May","June","July","August","September","October","November","December"],months_abbr:!1,navigation:["&#9664;","&#9654;","&#9650;","&#9660;"],offset:[5,-5],open_icon_only:!1,open_on_focus:!1,pair:!1,readonly_element:!0,rtl:!1,select_other_months:!1,show_clear_date:0,show_icon:!0,show_other_months:!0,show_select_today:"Today",show_week_number:!1,start_date:!1,strict:!1,view:"days",weekend_days:[0,6],zero_pad:!1,onChange:null,onClear:null,onOpen:null,onClose:null,onSelect:null},mt={},ft={},bt=!1,yt="",vt=!1,wt=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),kt=this,Dt=Nt(t),At=function(t){if(t+="",""!==Nt.trim(t)){var e,s,i=w(kt.settings.format),n=["d","D","j","l","N","S","w","F","m","M","n","Y","y","G","g","H","h","i","s","a","A"],a=[],r=[],o=null,d=null;for(s=0;s<n.length;s++)-1<(o=i.indexOf(n[s]))&&a.push({character:n[s],position:o});if(a.sort(function(t,e){return t.position-e.position}),Nt.each(a,function(t,e){switch(e.character){case"d":r.push("0[1-9]|[12][0-9]|3[01]");break;case"D":r.push("[a-z]{3}");break;case"j":r.push("[1-9]|[12][0-9]|3[01]");break;case"l":r.push("[a-zÀ-ɏ]+");break;case"N":r.push("[1-7]");break;case"S":r.push("st|nd|rd|th");break;case"w":r.push("[0-6]");break;case"F":r.push("[a-z]+");break;case"m":r.push("0[1-9]|1[012]");break;case"M":r.push("[a-z]{3}");break;case"n":r.push("[1-9]|1[012]");break;case"Y":r.push("[0-9]{4}");break;case"y":r.push("[0-9]{2}");break;case"G":r.push("[1-9]|1[0-9]|2[0123]");break;case"g":r.push("[0-9]|1[012]");break;case"H":r.push("0[0-9]|1[0-9]|2[0123]");break;case"h":r.push("0[0-9]|1[012]");break;case"i":case"s":r.push("0[0-9]|[12345][0-9]");break;case"a":r.push("am|pm");break;case"A":r.push("AM|PM")}}),r.length&&(a.reverse(),Nt.each(a,function(t,e){i=i.replace(e.character,"("+r[r.length-t-1]+")")}),r=new RegExp("^"+i+"$","ig"),d=r.exec(t))){var c,l,g=new Date,_=1,h=g.getMonth()+1,p=g.getFullYear(),u=g.getHours(),m=g.getMinutes(),f=g.getSeconds(),b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],y=["January","February","March","April","May","June","July","August","September","October","November","December"],v=!0;if(a.reverse(),Nt.each(a,function(s,i){if(!v)return!0;switch(i.character){case"m":case"n":h=It(d[s+1]);break;case"d":case"j":_=It(d[s+1]);break;case"D":case"l":case"F":case"M":l="D"===i.character||"l"===i.character?kt.settings.days:kt.settings.months,v=!1,Nt.each(l,function(t,e){if(v)return!0;if(d[s+1].toLowerCase()===e.substring(0,"D"===i.character||"M"===i.character?3:e.length).toLowerCase()){switch(i.character){case"D":d[s+1]=b[t].substring(0,3);break;case"l":d[s+1]=b[t];break;case"F":d[s+1]=y[t],h=t+1;break;case"M":d[s+1]=y[t].substring(0,3),h=t+1}v=!0}});break;case"Y":p=It(d[s+1]);break;case"y":p=It("20"+It(d[s+1]));break;case"G":case"H":case"g":case"h":u=It(d[s+1]);break;case"i":m=It(d[s+1]);break;case"s":f=It(d[s+1]);break;case"a":case"A":c=d[s+1].toLowerCase()}}),v&&(e=new Date(p,(h||1)-1,_||1,u+("pm"===c&&12!==u?12:"am"===c&&12===u?-12:0),m,f)).getFullYear()===p&&e.getDate()===(_||1)&&e.getMonth()===(h||1)-1)return e}return!1}},Ct=function(t){"firefox"===jt.name?t.css("MozUserSelect","none"):"explorer"===jt.name?Nt(document).on("selectstart",t,function(){return!1}):t.mousedown(function(){return!1})},w=function(t){return t.replace(/([-.,*+?^${}()|[\]\/\\])/g,"\\$1")},Mt=function(t){var e,s,i="",n=t.getDate(),a=t.getDay(),r=kt.settings.days[a],o=t.getMonth()+1,d=kt.settings.months[o-1],c=t.getFullYear()+"",l=t.getHours(),g=l%12==0?12:l%12,_=t.getMinutes(),h=t.getSeconds(),p=12<=l?"pm":"am";for(e=0;e<kt.settings.format.length;e++)switch(s=kt.settings.format.charAt(e)){case"y":c=c.substr(2);case"Y":i+=c;break;case"m":o=Yt(o,2);case"n":i+=o;break;case"M":d=Nt.isArray(kt.settings.months_abbr)&&void 0!==kt.settings.months_abbr[o-1]?kt.settings.months_abbr[o-1]:kt.settings.months[o-1].substr(0,3);case"F":i+=d;break;case"d":n=Yt(n,2);case"j":i+=n;break;case"D":r=Nt.isArray(kt.settings.days_abbr)&&void 0!==kt.settings.days_abbr[a]?kt.settings.days_abbr[a]:kt.settings.days[a].substr(0,3);case"l":i+=r;break;case"N":a++;case"w":i+=a;break;case"S":i+=n%10==1&&11!==n?"st":n%10==2&&12!==n?"nd":n%10==3&&13!==n?"rd":"th";break;case"g":i+=g;break;case"h":i+=Yt(g,2);break;case"G":i+=l;break;case"H":i+=Yt(l,2);break;case"i":i+=Yt(_,2);break;case"s":i+=Yt(h,2);break;case"a":i+=p;break;case"A":i+=p.toUpperCase();break;default:i+=s}return i},f=function(s,i,n){var a,t,r;for(t in void 0!==i&&(i+=1),I)if(a=I[t],r=!1,Nt.isArray(mt[a])&&Nt.each(mt[a],function(){if(!r){var t,e=this;if((-1<Nt.inArray(s,e[2])||-1<Nt.inArray("*",e[2]))&&(void 0!==i&&-1<Nt.inArray(i,e[1])||-1<Nt.inArray("*",e[1]))&&(void 0!==n&&-1<Nt.inArray(n,e[0])||-1<Nt.inArray("*",e[0]))){if(-1<Nt.inArray("*",e[3]))return r=a;if(t=new Date(s,i-1,n).getDay(),-1<Nt.inArray(t,e[3]))return r=a}}}),r)return r;return r||""},b=function(t){var e,s,i,n,a,r,o,d=t.getFullYear(),c=t.getMonth()+1,l=t.getDate();return(o=(a=c<3?(i=(s=((e=d-1)/4|0)-(e/100|0)+(e/400|0))-(((e-1)/4|0)-((e-1)/100|0)+((e-1)/400|0)),n=0,l-1+31*(c-1)):(n=(i=(s=((e=d)/4|0)-(e/100|0)+(e/400|0))-(((e-1)/4|0)-((e-1)/100|0)+((e-1)/400|0)))+1,l+((153*(c-3)+2)/5|0)+58+i))+3-(l=(a+(r=(e+s)%7)-n)%7))<0?53-((r-i)/5|0):364+i<o?1:1+(o/7|0)},Pt=function(s,i,n){var t,e,a,r;if(!(void 0!==s&&!isNaN(s)||void 0!==i&&!isNaN(i)||void 0!==n&&!isNaN(n)))return!1;if(s<1e3)return!0;if(Nt.isArray(kt.settings.direction)||0!==It(kt.settings.direction)){if(8===(e=((t=It(o(s,void 0!==i?Yt(i,2):"",void 0!==n?Yt(n,2):"")))+"").length)&&(void 0!==ot&&t<It(o(E,Yt(B,2),Yt(W,2)))||void 0!==R&&t>It(o($,Yt(V,2),Yt(U,2)))))return!0;if(6===e&&(void 0!==ot&&t<It(o(E,Yt(B,2)))||void 0!==R&&t>It(o($,Yt(V,2)))))return!0;if(4===e&&(void 0!==ot&&t<E||void 0!==R&&$<t))return!0}return void 0!==i&&(i+=1),r=a=!1,Nt.isArray(L)&&L.length&&Nt.each(L,function(){if(!a){var t,e=this;if((-1<Nt.inArray(s,e[2])||-1<Nt.inArray("*",e[2]))&&(void 0!==i&&-1<Nt.inArray(i,e[1])||-1<Nt.inArray("*",e[1]))&&(void 0!==n&&-1<Nt.inArray(n,e[0])||-1<Nt.inArray("*",e[0]))){if(-1<Nt.inArray("*",e[3]))return a=!0;if(t=new Date(s,i-1,n).getDay(),-1<Nt.inArray(t,e[3]))return a=!0}}}),T&&Nt.each(T,function(){if(!r){var t,e=this;if((-1<Nt.inArray(s,e[2])||-1<Nt.inArray("*",e[2]))&&(r=!0,void 0!==i))if(r=!0,-1<Nt.inArray(i,e[1])||-1<Nt.inArray("*",e[1])){if(void 0!==n)if(r=!0,-1<Nt.inArray(n,e[0])||-1<Nt.inArray("*",e[0])){if(-1<Nt.inArray("*",e[3]))return r=!0;if(t=new Date(s,i-1,n).getDay(),-1<Nt.inArray(t,e[3]))return r=!0;r=!1}else r=!1}else r=!1}}),(!T||!r)&&!(!L||!a)},Ft=function(t){return(t+"").match(/^\-?[0-9]+$/)},y=function(t){!isNaN(parseFloat(it))&&isFinite(it)&&(t=t.replace(/\bm\b|\bn\b|\bF\b|\bM\b/,function(t){switch(t){case"m":return Yt(it+1,2);case"n":return it+1;case"F":return kt.settings.months[it];case"M":return Nt.isArray(kt.settings.months_abbr)&&void 0!==kt.settings.months_abbr[it]?kt.settings.months_abbr[it]:kt.settings.months[it].substr(0,3);default:return t}})),!isNaN(parseFloat(nt))&&isFinite(nt)&&(t=t.replace(/\bY\b/,nt).replace(/\by\b/,(nt+"").substr(2)).replace(/\bY1\b/i,nt-7).replace(/\bY2\b/i,nt+4)),Nt(".dp_caption",J).html(t)},Zt=function(t){var e,s,i,n;""===j.text()||"days"===_t?(""===j.text()?(kt.settings.always_visible instanceof jQuery||z.css("left",-1e3),z.removeClass("hidden"),a(),e=void 0!==j[0].getBoundingClientRect&&void 0!==j[0].getBoundingClientRect().height?j[0].getBoundingClientRect().height:j.outerHeight(!0),q.css("height",e),gt.css("height",e),ct.css("height",e+J.outerHeight(!0)),z.css("width",z.outerWidth()),z.addClass("dp_hidden")):a(),J.show(),q.hide(),gt.hide(),ct.hide(),st.hide(),Z.hide(),lt&&st.show().removeClass("dp_calendar")):"months"===_t?(function(){y(kt.settings.header_captions.months);var t,e,s,i="<tr>";for(t=0;t<12;t++)0<t&&t%3==0&&(i+="</tr><tr>"),e="dp_month_"+(s=kt.settings.rtl?2+t-t%3*2:t),Pt(nt,s)?e+=" dp_disabled":!1!==H&&H===s&&nt===O?e+=" dp_selected":x===s&&Y===nt&&(e+=" dp_current"),i+='<td class="'+Nt.trim(e)+'">'+(Nt.isArray(kt.settings.months_abbr)&&void 0!==kt.settings.months_abbr[s]?kt.settings.months_abbr[s]:kt.settings.months[s].substr(0,3))+"</td>";i+="</tr>",q.html(Nt(i)),kt.settings.always_visible&&(d=Nt("td:not(.dp_disabled)",q)),q.show()}(),j.hide(),gt.hide(),ct.hide(),st.hide(),Z.hide()):"years"===_t?(function(){y(kt.settings.header_captions.years);var t,e,s,i="<tr>";for(t=0;t<12;t++)0<t&&t%3==0&&(i+="</tr><tr>"),s=kt.settings.rtl?2+t-t%3*2:t,e="",Pt(nt-7+s)?e+=" dp_disabled":O&&O===nt-7+s?e+=" dp_selected":Y===nt-7+s&&(e+=" dp_current"),i+="<td"+(""!==Nt.trim(e)?' class="'+Nt.trim(e)+'"':"")+">"+(nt-7+s)+"</td>";i+="</tr>",gt.html(Nt(i)),kt.settings.always_visible&&(c=Nt("td:not(.dp_disabled)",gt)),gt.show()}(),j.hide(),q.hide(),ct.hide(),st.hide(),Z.hide()):"time"===_t&&(n=lt.hours&&lt.minutes&&lt.seconds&&lt.ampm,i='<tr class="dp_time_controls_increase'+(n?" dp_time_controls_condensed":"")+'">'+(kt.settings.rtl&&lt.ampm?'<td class="dp_time_ampm dp_time_control">'+kt.settings.navigation[2]+"</td>":"")+(lt.hours?'<td class="dp_time_hour dp_time_control">'+kt.settings.navigation[2]+"</td>":"")+(lt.minutes?'<td class="dp_time_minute dp_time_control">'+kt.settings.navigation[2]+"</td>":"")+(lt.seconds?'<td class="dp_time_second dp_time_control">'+kt.settings.navigation[2]+"</td>":"")+(!kt.settings.rtl&&lt.ampm?'<td class="dp_time_ampm dp_time_control">'+kt.settings.navigation[2]+"</td>":"")+"</tr>",i+='<tr class="dp_time_segments'+(n?" dp_time_controls_condensed":"")+'">',kt.settings.rtl&&lt.ampm&&(i+='<td class="dp_time_ampm dp_disabled'+(lt.hours||lt.minutes||lt.seconds?" dp_time_separator":"")+'"><div>'+et.toUpperCase()+"</div></td>"),lt.hours&&(i+='<td class="dp_time_hours dp_disabled'+(lt.minutes||lt.seconds||!kt.settings.rtl&&lt.ampm?" dp_time_separator":"")+'"><div>'+("h"===lt.hour_format||"H"===lt.hour_format?Yt(X,2):X)+"</div></td>"),lt.minutes&&(i+='<td class="dp_time_minutes dp_disabled'+(lt.seconds||!kt.settings.rtl&&lt.ampm?" dp_time_separator":"")+'"><div>'+Yt(K,2)+"</div></td>"),lt.seconds&&(i+='<td class="dp_time_seconds dp_disabled'+(!kt.settings.rtl&&lt.ampm?" dp_time_separator":"")+'"><div>'+Yt(tt,2)+"</div></td>"),!kt.settings.rtl&&lt.ampm&&(i+='<td class="dp_time_ampm dp_disabled">'+et.toUpperCase()+"</td>"),i+="</tr>",i+='<tr class="dp_time_controls_decrease'+(n?" dp_time_controls_condensed":"")+'">'+(kt.settings.rtl&&lt.ampm?'<td class="dp_time_ampm dp_time_control">'+kt.settings.navigation[3]+"</td>":"")+(lt.hours?'<td class="dp_time_hour dp_time_control">'+kt.settings.navigation[3]+"</td>":"")+(lt.minutes?'<td class="dp_time_minute dp_time_control">'+kt.settings.navigation[3]+"</td>":"")+(lt.seconds?'<td class="dp_time_second dp_time_control">'+kt.settings.navigation[3]+"</td>":"")+(!kt.settings.rtl&&lt.ampm?'<td class="dp_time_ampm dp_time_control">'+kt.settings.navigation[3]+"</td>":"")+"</tr>",ct.html(Nt(i)),ct.show(),1===ht.length?(st.hide(),Z.show()):(st.show().addClass("dp_calendar"),""===Dt.val()?Z.hide():Z.show()),J.hide(),j.hide(),q.hide(),gt.hide()),!1!==t&&kt.settings.onChange&&"function"==typeof kt.settings.onChange&&void 0!==_t&&((s="days"===_t?j.find("td:not(.dp_disabled)"):"months"===_t?q.find("td:not(.dp_disabled)"):"years"===_t?gt.find("td:not(.dp_disabled)"):ct.find(".dp_time_segments td")).each(function(){var t;"days"===_t?Nt(this).hasClass("dp_not_in_month")&&!Nt(this).hasClass("dp_disabled")?(t=Nt(this).attr("class").match(/date\_([0-9]{4})(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])/),Nt(this).data("date",t[1]+"-"+t[2]+"-"+t[3])):Nt(this).data("date",nt+"-"+Yt(it+1,2)+"-"+Yt(It(Nt(this).text()),2)):"months"===_t?(t=Nt(this).attr("class").match(/dp\_month\_([0-9]+)/),Nt(this).data("date",nt+"-"+Yt(It(t[1])+1,2))):"years"===_t&&Nt(this).data("date",It(Nt(this).text()))}),kt.settings.onChange.call(Dt,_t,s)),Q.show(),"time"===_t&&1<ht.length?(at.hide(),P.hide(),st.css("width",""===Dt.val()?"100%":"50%")):(at.show(),P.show(),!0===kt.settings.show_clear_date||0===kt.settings.show_clear_date&&""!==Dt.val()||kt.settings.always_visible&&!1!==kt.settings.show_clear_date?rt?(at.css("width","50%"),P.css("width","50%")):(at.hide(),P.css("width",-1<Nt.inArray(ht,"time")?"50%":"100%")):(P.hide(),rt?at.css("width","100%"):(at.hide(),lt&&("time"===_t||"days"===_t)||Q.hide())))},St=function(t){var e,s=0<Nt(t).parent(".dp_time_controls_increase").length,i=Nt(t).attr("class").match(/dp\_time\_([^\s]+)/i),n=Nt(".dp_time_segments .dp_time_"+i[1]+("ampm"!==i[1]?"s":""),ct),a=n.text().toLowerCase(),r=lt[i[1]+("ampm"!==i[1]?"s":"")],o=Nt.inArray("ampm"!==i[1]?parseInt(a,10):a,r),d=-1===o?0:s?o+1>=r.length?0:o+1:o-1<0?r.length-1:o-1;"hour"===i[1]?X=r[d]:"minute"===i[1]?K=r[d]:"second"===i[1]?tt=r[d]:et=r[d],!N&&kt.settings.start_date&&(e=At(kt.settings.start_date))&&(N=e.getDate()),N=N||W,n.text(Yt(r[d],2).toUpperCase()),xt(nt,it,N)},xt=function(t,e,s,i,n){var a=new Date(t,e,s,lt&&lt.hours?X+(lt.ampm?"pm"===et&&12!==X?12:"am"===et&&12===X?-12:0:0):12,lt&&lt.minutes?K:0,lt&&lt.seconds?tt:0),r="days"===i?m:"months"===i?d:c,o=Mt(a);Dt.val(o),(kt.settings.always_visible||lt)&&(H=a.getMonth(),it=a.getMonth(),O=a.getFullYear(),nt=a.getFullYear(),N=a.getDate(),n&&r&&(r.removeClass("dp_selected"),n.addClass("dp_selected"),"days"===i&&n.hasClass("dp_not_in_month")&&!n.hasClass("dp_disabled")&&kt.show())),lt?(_t="time",Zt()):(Dt.focus(),kt.hide()),zt(a),!lt&&kt.settings.onSelect&&"function"==typeof kt.settings.onSelect&&kt.settings.onSelect.call(Dt,o,t+"-"+Yt(e+1,2)+"-"+Yt(s,2),a)},o=function(){var t,e="";for(t=0;t<arguments.length;t++)e+=arguments[t]+"";return e},Yt=function(t,e){for(t+="";t.length<e;)t="0"+t;return t},It=function(t){return parseInt(t,10)},zt=function(s){kt.settings.pair&&Nt.each(kt.settings.pair,function(){var t,e=Nt(this);e.data&&e.data("Zebra_DatePicker")?((t=e.data("Zebra_DatePicker")).update({reference_date:s,direction:0===t.settings.direction?1:t.settings.direction}),t.settings.always_visible&&t.show()):e.data("zdp_reference_date",s)})},jt={init:function(){this.name=this.searchString(this.dataBrowser)||"",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||""},searchString:function(t){var e,s,i;for(e=0;e<t.length;e++)if(s=t[e].string,i=t[e].prop,this.versionSearchString=t[e].versionSearch||t[e].identity,s){if(-1!==s.indexOf(t[e].subString))return t[e].identity}else if(i)return t[e].identity},searchVersion:function(t){var e=t.indexOf(this.versionSearchString);if(-1!==e)return parseFloat(t.substring(e+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Firefox",identity:"firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"explorer",versionSearch:"MSIE"}]};kt.settings={},kt.clear_date=function(){Nt(P).trigger("click")},kt.destroy=function(){void 0!==kt.icon&&(kt.icon.off("click.Zebra_DatePicker_"+yt),kt.icon.off("focus.Zebra_DatePicker_"+yt),kt.icon.off("keydown.Zebra_DatePicker_"+yt),kt.icon.remove()),z.off(),z.remove(),!kt.settings.show_icon||kt.settings.always_visible instanceof jQuery||Dt.unwrap(),Dt.off("blur.Zebra_DatePicker_"+yt),Dt.off("click.Zebra_DatePicker_"+yt),Dt.off("focus.Zebra_DatePicker_"+yt),Dt.off("keydown.Zebra_DatePicker_"+yt),Dt.off("mousedown.Zebra_DatePicker_"+yt),Nt(document).off("keyup.Zebra_DatePicker_"+yt),Nt(document).off("mousedown.Zebra_DatePicker_"+yt),Nt(document).off("touchend.Zebra_DatePicker_"+yt),Nt(window).off("resize.Zebra_DatePicker_"+yt),Nt(window).off("orientationchange.Zebra_DatePicker_"+yt),Dt.removeData("Zebra_DatePicker"),Dt.attr("readonly",ft.readonly),Dt.attr("style",ft.style?ft.style:""),Dt.css("paddingLeft",ft.padding_left),Dt.css("paddingRight",ft.padding_right)},kt.hide=function(t){z.hasClass("dp_hidden")||kt.settings.always_visible&&!t||(g("hide"),z.addClass("dp_hidden"),kt.settings.onClose&&"function"==typeof kt.settings.onClose&&kt.settings.onClose.call(Dt))},kt.set_date=function(t){var e;"object"==typeof t&&t instanceof Date&&(t=Mt(t)),(e=At(t))&&!Pt(e.getFullYear(),e.getMonth(),e.getDate())&&(Dt.val(t),zt(e))},kt.show=function(t){_t=kt.settings.view;var e,s=At(Dt.val()||(kt.settings.start_date?kt.settings.start_date:""));if(s?(H=s.getMonth(),it=s.getMonth(),O=s.getFullYear(),nt=s.getFullYear(),N=s.getDate(),Pt(O,H,N)&&(kt.settings.strict&&Dt.val(""),it=B,nt=E)):(it=B,nt=E),lt&&(e=s||new Date,X=e.getHours(),K=e.getMinutes(),tt=e.getSeconds(),et=12<=X?"pm":"am",lt.is12hour&&(X=X%12==0?12:X%12),Nt.isArray(kt.settings.enabled_hours)&&-1===Nt.inArray(X,kt.settings.enabled_hours)&&(X=kt.settings.enabled_hours[0]),Nt.isArray(kt.settings.enabled_minutes)&&-1===Nt.inArray(K,kt.settings.enabled_minutes)&&(K=kt.settings.enabled_minutes[0]),Nt.isArray(kt.settings.enabled_seconds)&&-1===Nt.inArray(tt,kt.settings.enabled_seconds)&&(tt=kt.settings.enabled_seconds[0])),Zt(t),kt.settings.always_visible instanceof jQuery)z.removeClass("dp_hidden");else{if(kt.settings.container.is("body")){var i=z.outerWidth(),n=z.outerHeight(),a=(void 0!==G?G.offset().left+G.outerWidth(!0):Dt.offset().left+Dt.outerWidth(!0))+kt.settings.offset[0],r=(void 0!==G?G.offset().top:Dt.offset().top)-n+kt.settings.offset[1],o=Nt(window).width(),d=Nt(window).height(),c=Nt(window).scrollTop(),l=Nt(window).scrollLeft();"below"===kt.settings.default_position&&(r=(void 0!==G?G.offset().top:Dt.offset().top)+kt.settings.offset[1]),l+o<a+i&&(a=l+o-i),a<l&&(a=l),c+d<r+n&&(r=c+d-n),r<c&&(r=c),z.css({left:a,top:r})}else z.css({left:0,top:0});z.removeClass("dp_hidden"),g()}!1!==t&&kt.settings.onOpen&&"function"==typeof kt.settings.onOpen&&kt.settings.onOpen.call(Dt)},kt.update=function(t){kt.original_direction&&(kt.original_direction=kt.direction),kt.settings=Nt.extend(kt.settings,t),e(!0)},jt.init(),e()},Nt.fn.Zebra_DatePicker=function(e){return this.each(function(){void 0!==Nt(this).data("Zebra_DatePicker")&&Nt(this).data("Zebra_DatePicker").destroy();var t=new Nt.Zebra_DatePicker(this,e);Nt(this).data("Zebra_DatePicker",t)})},Nt.fn.Zebra_DatePicker.defaults={}});
/*** chosen.js ***/
(function(){var t,e,s,i,r=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;(i=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,s,i,r,n,o;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:t.label,title:t.title?t.title:void 0,children:0,disabled:t.disabled,classes:t.className}),o=[],s=0,i=(n=t.childNodes).length;s<i;s++)r=n[s],o.push(this.add_option(r,e,t.disabled));return o},t.prototype.add_option=function(t,e,s){if("OPTION"===t.nodeName.toUpperCase())return""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,title:t.title?t.title:void 0,selected:t.selected,disabled:!0===s?s:t.disabled,group_array_index:e,group_label:null!=e?this.parsed[e].label:null,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},t}()).select_to_array=function(t){var e,s,r,n,o;for(n=new i,s=0,r=(o=t.childNodes).length;s<r;s++)e=o[s],n.add_node(e);return n.parsed},e=function(){function t(e,s){this.form_field=e,this.options=null!=s?s:{},this.label_click_handler=r(this.label_click_handler,this),t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}return t.prototype.set_default_values=function(){var t;return this.click_test_action=(t=this,function(e){return t.test_active_click(e)}),this.activate_action=function(t){return function(e){return t.activate_field(e)}}(this),this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.is_rtl=this.options.rtl||/\bchosen-rtl\b/.test(this.form_field.className),this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=!0,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options,this.include_group_label_in_selected=this.options.include_group_label_in_selected||!1,this.max_shown_results=this.options.max_shown_results||Number.POSITIVE_INFINITY,this.case_sensitive_search=this.options.case_sensitive_search||!1,this.hide_results_on_select=null==this.options.hide_results_on_select||this.options.hide_results_on_select},t.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.default_text=this.escape_html(this.default_text),this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.choice_label=function(t){return this.include_group_label_in_selected&&null!=t.group_label?"<b class='group-name'>"+t.group_label+"</b>"+t.html:t.html},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(t){if(this.is_multiple){if(!this.active_field)return setTimeout((e=this,function(){return e.container_mousedown()}),50)}else if(!this.active_field)return this.activate_field();var e},t.prototype.input_blur=function(t){if(!this.mouse_on_container)return this.active_field=!1,setTimeout((e=this,function(){return e.blur_test()}),100);var e},t.prototype.label_click_handler=function(t){return this.is_multiple?this.container_mousedown(t):this.activate_field()},t.prototype.results_option_build=function(t){var e,s,i,r,n,o,h;for(e="",h=0,r=0,n=(o=this.results_data).length;r<n&&(i="",""!==(i=(s=o[r]).group?this.result_add_group(s):this.result_add_option(s))&&(h++,e+=i),(null!=t?t.first:void 0)&&(s.selected&&this.is_multiple?this.choice_build(s):s.selected&&!this.is_multiple&&this.single_set_selected_text(this.choice_label(s))),!(h>=this.max_shown_results));r++);return e},t.prototype.result_add_option=function(t){var e,s;return t.search_match&&this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),(s=document.createElement("li")).className=e.join(" "),s.style.cssText=t.style,s.setAttribute("data-option-array-index",t.array_index),s.innerHTML=t.highlighted_html||t.html,t.title&&(s.title=t.title),this.outerHTML(s)):""},t.prototype.result_add_group=function(t){var e,s;return(t.search_match||t.group_match)&&t.active_options>0?((e=[]).push("group-result"),t.classes&&e.push(t.classes),(s=document.createElement("li")).className=e.join(" "),s.innerHTML=t.highlighted_html||this.escape_html(t.label),t.title&&(s.title=t.title),this.outerHTML(s)):""},t.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing)return this.winnow_results()},t.prototype.reset_single_select_options=function(){var t,e,s,i,r;for(r=[],t=0,e=(s=this.results_data).length;t<e;t++)(i=s[t]).selected?r.push(i.selected=!1):r.push(void 0);return r},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(t){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,e,s,i,r,n,o,h,l,c,_,a,u,d,p;for(this.no_results_clear(),c=0,t=(o=this.get_search_text()).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),l=this.get_search_regex(t),s=0,i=(h=this.results_data).length;s<i;s++)(r=h[s]).search_match=!1,_=null,a=null,r.highlighted_html="",this.include_option_in_results(r)&&(r.group&&(r.group_match=!1,r.active_options=0),null!=r.group_array_index&&this.results_data[r.group_array_index]&&(0===(_=this.results_data[r.group_array_index]).active_options&&_.search_match&&(c+=1),_.active_options+=1),p=r.group?r.label:r.text,r.group&&!this.group_search||(a=this.search_string_match(p,l),r.search_match=null!=a,r.search_match&&!r.group&&(c+=1),r.search_match?(o.length&&(u=a.index,n=p.slice(0,u),e=p.slice(u,u+o.length),d=p.slice(u+o.length),r.highlighted_html=this.escape_html(n)+"<em>"+this.escape_html(e)+"</em>"+this.escape_html(d)),null!=_&&(_.group_match=!0)):null!=r.group_array_index&&this.results_data[r.group_array_index].search_match&&(r.search_match=!0)));return this.result_clear_highlight(),c<1&&o.length?(this.update_results_content(""),this.no_results(o)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.get_search_regex=function(t){var e,s;return s=this.search_contains?t:"(^|\\s|\\b)"+t+"[^\\s]*",this.enable_split_word_search||this.search_contains||(s="^"+s),e=this.case_sensitive_search?"":"i",new RegExp(s,e)},t.prototype.search_string_match=function(t,e){var s;return s=e.exec(t),!this.search_contains&&(null!=s?s[1]:void 0)&&(s.index+=1),s},t.prototype.choices_count=function(){var t,e,s;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,t=0,e=(s=this.form_field.options).length;t<e;t++)s[t].selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){if(t.preventDefault(),this.activate_field(),!this.results_showing&&!this.is_disabled)return this.results_show()},t.prototype.keydown_checker=function(t){var e,s;switch(s=null!=(e=t.which)?e:t.keyCode,this.search_field_scale(),8!==s&&this.pending_backstroke&&this.clear_backstroke(),s){case 8:this.backstroke_length=this.get_search_field_value().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:case 27:this.results_showing&&t.preventDefault();break;case 32:this.disable_search&&t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},t.prototype.keyup_checker=function(t){var e,s;switch(s=null!=(e=t.which)?e:t.keyCode,this.search_field_scale(),s){case 8:this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0?this.keydown_backstroke():this.pending_backstroke||(this.result_clear_highlight(),this.results_search());break;case 13:t.preventDefault(),this.results_showing&&this.result_select(t);break;case 27:this.results_showing&&this.results_hide();break;case 9:case 16:case 17:case 18:case 38:case 40:case 91:break;default:this.results_search()}},t.prototype.clipboard_event_checker=function(t){var e;if(!this.is_disabled)return setTimeout((e=this,function(){return e.results_search()}),50)},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:jQuery("#"+this.form_field.id).width()+"px"},t.prototype.include_option_in_results=function(t){return!(this.is_multiple&&!this.display_selected_options&&t.selected)&&(!(!this.display_disabled_options&&t.disabled)&&!t.empty)},t.prototype.search_results_touchstart=function(t){return this.touch_started=!0,this.search_results_mouseover(t)},t.prototype.search_results_touchmove=function(t){return this.touch_started=!1,this.search_results_mouseout(t)},t.prototype.search_results_touchend=function(t){if(this.touch_started)return this.search_results_mouseup(t)},t.prototype.outerHTML=function(t){var e;return t.outerHTML?t.outerHTML:((e=document.createElement("div")).appendChild(t),e.innerHTML)},t.prototype.get_single_html=function(){return'<a class="chosen-single chosen-default">\n  <span>'+this.default_text+'</span>\n  <div><b></b></div>\n</a>\n<div class="chosen-drop">\n  <div class="chosen-search">\n    <input class="chosen-search-input" type="text" autocomplete="off" />\n  </div>\n  <ul class="chosen-results"></ul>\n</div>'},t.prototype.get_multi_html=function(){return'<ul class="chosen-choices">\n  <li class="search-field">\n    <input class="chosen-search-input" type="text" autocomplete="off" value="'+this.default_text+'" />\n  </li>\n</ul>\n<div class="chosen-drop">\n  <ul class="chosen-results"></ul>\n</div>'},t.prototype.get_no_results_html=function(t){return'<li class="no-results">\n  '+this.results_none_found+" <span>"+this.escape_html(t)+"</span>\n</li>"},t.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!(/iP(od|hone)/i.test(window.navigator.userAgent)||/IEMobile/i.test(window.navigator.userAgent)||/Windows Phone/i.test(window.navigator.userAgent)||/BlackBerry/i.test(window.navigator.userAgent)||/BB10/i.test(window.navigator.userAgent)||/Android.*Mobile/i.test(window.navigator.userAgent))},t.default_multiple_text="请选择(可多选)",t.default_single_text="请选择",t.default_no_result_text="无匹配结果",t}(),(t=jQuery).fn.extend({chosen:function(i){return e.browser_is_supported()?this.each(function(e){var r,n;n=(r=t(this)).data("chosen"),"destroy"!==i?n instanceof s||r.data("chosen",new s(this,i)):n instanceof s&&n.destroy()}):this}}),s=function(s){function r(){return r.__super__.constructor.apply(this,arguments)}return function(t,e){for(var s in e)n.call(e,s)&&(t[s]=e[s]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(r,e),r.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex},r.prototype.set_up_html=function(){var e,s;return(e=["chosen-container"]).push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),s={class:e.join(" "),title:this.form_field.title},this.form_field.id.length&&(s.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",s),this.container.width(this.container_width()),this.is_multiple?this.container.html(this.get_multi_html()):this.container.html(this.get_single_html()),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior()},r.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})},r.prototype.register_observers=function(){var t;return this.container.on("touchstart.chosen",(t=this,function(e){t.container_mousedown(e)})),this.container.on("touchend.chosen",function(t){return function(e){t.container_mouseup(e)}}(this)),this.container.on("mousedown.chosen",function(t){return function(e){t.container_mousedown(e)}}(this)),this.container.on("mouseup.chosen",function(t){return function(e){t.container_mouseup(e)}}(this)),this.container.on("mouseenter.chosen",function(t){return function(e){t.mouse_enter(e)}}(this)),this.container.on("mouseleave.chosen",function(t){return function(e){t.mouse_leave(e)}}(this)),this.search_results.on("mouseup.chosen",function(t){return function(e){t.search_results_mouseup(e)}}(this)),this.search_results.on("mouseover.chosen",function(t){return function(e){t.search_results_mouseover(e)}}(this)),this.search_results.on("mouseout.chosen",function(t){return function(e){t.search_results_mouseout(e)}}(this)),this.search_results.on("mousewheel.chosen DOMMouseScroll.chosen",function(t){return function(e){t.search_results_mousewheel(e)}}(this)),this.search_results.on("touchstart.chosen",function(t){return function(e){t.search_results_touchstart(e)}}(this)),this.search_results.on("touchmove.chosen",function(t){return function(e){t.search_results_touchmove(e)}}(this)),this.search_results.on("touchend.chosen",function(t){return function(e){t.search_results_touchend(e)}}(this)),this.form_field_jq.on("chosen:updated.chosen",function(t){return function(e){t.results_update_field(e)}}(this)),this.form_field_jq.on("chosen:activate.chosen",function(t){return function(e){t.activate_field(e)}}(this)),this.form_field_jq.on("chosen:open.chosen",function(t){return function(e){t.container_mousedown(e)}}(this)),this.form_field_jq.on("chosen:close.chosen",function(t){return function(e){t.close_field(e)}}(this)),this.search_field.on("blur.chosen",function(t){return function(e){t.input_blur(e)}}(this)),this.search_field.on("keyup.chosen",function(t){return function(e){t.keyup_checker(e)}}(this)),this.search_field.on("keydown.chosen",function(t){return function(e){t.keydown_checker(e)}}(this)),this.search_field.on("focus.chosen",function(t){return function(e){t.input_focus(e)}}(this)),this.search_field.on("cut.chosen",function(t){return function(e){t.clipboard_event_checker(e)}}(this)),this.search_field.on("paste.chosen",function(t){return function(e){t.clipboard_event_checker(e)}}(this)),this.is_multiple?this.search_choices.on("click.chosen",function(t){return function(e){t.choices_click(e)}}(this)):this.container.on("click.chosen",function(t){t.preventDefault()})},r.prototype.destroy=function(){return t(this.container[0].ownerDocument).off("click.chosen",this.click_test_action),this.form_field_label.length>0&&this.form_field_label.off("click.chosen"),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},r.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field.disabled||this.form_field_jq.parents("fieldset").is(":disabled"),this.container.toggleClass("chosen-disabled",this.is_disabled),this.search_field[0].disabled=this.is_disabled,this.is_multiple||this.selected_item.off("focus.chosen",this.activate_field),this.is_disabled?this.close_field():this.is_multiple?void 0:this.selected_item.on("focus.chosen",this.activate_field)},r.prototype.container_mousedown=function(e){var s;if(!this.is_disabled)return!e||"mousedown"!==(s=e.type)&&"touchstart"!==s||this.results_showing||e.preventDefault(),null!=e&&t(e.target).hasClass("search-choice-close")?void 0:(this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(this.container[0].ownerDocument).on("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},r.prototype.container_mouseup=function(t){if("ABBR"===t.target.nodeName&&!this.is_disabled)return this.results_reset(t)},r.prototype.search_results_mousewheel=function(t){var e;if(t.originalEvent&&(e=t.originalEvent.deltaY||-t.originalEvent.wheelDelta||t.originalEvent.detail),null!=e)return t.preventDefault(),"DOMMouseScroll"===t.type&&(e*=40),this.search_results.scrollTop(e+this.search_results.scrollTop())},r.prototype.blur_test=function(t){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},r.prototype.close_field=function(){return t(this.container[0].ownerDocument).off("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale(),this.search_field.blur()},r.prototype.activate_field=function(){if(!this.is_disabled)return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},r.prototype.test_active_click=function(e){var s;return(s=t(e.target).closest(".chosen-container")).length&&this.container[0]===s[0]?this.active_field=!0:this.close_field()},r.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=i.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},r.prototype.result_do_highlight=function(t){var e,s,i,r,n;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),r=(i=parseInt(this.search_results.css("maxHeight"),10))+(n=this.search_results.scrollTop()),(e=(s=this.result_highlight.position().top+this.search_results.scrollTop())+this.result_highlight.outerHeight())>=r)return this.search_results.scrollTop(e-i>0?e-i:0);if(s<n)return this.search_results.scrollTop(s)}},r.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},r.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.get_search_field_value()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},r.prototype.update_results_content=function(t){return this.search_results.html(t)},r.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},r.prototype.set_tab_index=function(t){var e;if(this.form_field.tabIndex)return e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e},r.prototype.set_label_behavior=function(){if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0)return this.form_field_label.on("click.chosen",this.label_click_handler)},r.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},r.prototype.search_results_mouseup=function(e){var s;if((s=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first()).length)return this.result_highlight=s,this.result_select(e),this.search_field.focus()},r.prototype.search_results_mouseover=function(e){var s;if(s=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first())return this.result_do_highlight(s)},r.prototype.search_results_mouseout=function(e){if(t(e.target).hasClass("active-result")||t(e.target).parents(".active-result").first())return this.result_clear_highlight()},r.prototype.choice_build=function(e){var s,i,r;return s=t("<li />",{class:"search-choice"}).html("<span>"+this.choice_label(e)+"</span>"),e.disabled?s.addClass("search-choice-disabled"):((i=t("<a />",{class:"search-choice-close","data-option-array-index":e.array_index})).on("click.chosen",(r=this,function(t){return r.choice_destroy_link_click(t)})),s.append(i)),this.search_container.before(s)},r.prototype.choice_destroy_link_click=function(e){if(e.preventDefault(),e.stopPropagation(),!this.is_disabled)return this.choice_destroy(t(e.target))},r.prototype.choice_destroy=function(t){if(this.result_deselect(t[0].getAttribute("data-option-array-index")))return this.active_field?this.search_field.focus():this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.get_search_field_value().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()},r.prototype.results_reset=function(){if(this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.trigger_form_field_change(),this.active_field)return this.results_hide()},r.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},r.prototype.result_select=function(t){var e,s;if(this.result_highlight)return e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),e.addClass("result-selected"),(s=this.results_data[e[0].getAttribute("data-option-array-index")]).selected=!0,this.form_field.options[s.options_index].selected=!0,this.selected_option_count=null,this.search_field.val(""),this.is_multiple?this.choice_build(s):this.single_set_selected_text(this.choice_label(s)),this.is_multiple&&(!this.hide_results_on_select||t.metaKey||t.ctrlKey)?this.winnow_results():(this.results_hide(),this.show_search_field_default()),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.trigger_form_field_change({selected:this.form_field.options[s.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,t.preventDefault(),this.search_field_scale())},r.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").html(t)},r.prototype.result_deselect=function(t){var e;return e=this.results_data[t],!this.form_field.options[e.options_index].disabled&&(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.trigger_form_field_change({deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},r.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},r.prototype.get_search_field_value=function(){return this.search_field.val()},r.prototype.get_search_text=function(){return t.trim(this.get_search_field_value())},r.prototype.escape_html=function(e){return t("<div/>").text(e).html()},r.prototype.winnow_results_set_highlight=function(){var t,e;if(null!=(t=(e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result")).length?e.first():this.search_results.find(".active-result").first()))return this.result_do_highlight(t)},r.prototype.no_results=function(t){var e;return e=this.get_no_results_html(t),this.search_results.append(e),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},r.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},r.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},r.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result")).length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight()):void 0:this.results_show()},r.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last()).length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0},r.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},r.prototype.search_field_scale=function(){var e,s,i,r,n,o,h;if(this.is_multiple){for(n={position:"absolute",left:"-1000px",top:"-1000px",display:"none",whiteSpace:"pre"},s=0,i=(o=["fontSize","fontStyle","fontWeight","fontFamily","lineHeight","textTransform","letterSpacing"]).length;s<i;s++)n[r=o[s]]=this.search_field.css(r);return(e=t("<div />").css(n)).text(this.get_search_field_value()),t("body").append(e),h=e.width()+25,e.remove(),this.container.is(":visible")&&(h=Math.min(this.container.outerWidth()-10,h)),this.search_field.width(h)}},r.prototype.trigger_form_field_change=function(t){return this.form_field_jq.trigger("input",t),this.form_field_jq.trigger("change",t)},r}()}).call(this);
// 更换变量分隔符
Vue.options.delimiters = ['${', '}'];

var mage = mage || {};
mage.admin = (function() {
    function goPage(url,showLast) {
        history.replaceState(null,null, url);
        var url = mage.admin.formatUrl(url);
        $.showLoading();
        $.ajax({
            type:'GET',
            url:url,
            beforeSend:function(req) {
                req.setRequestHeader("ajax-menu",url);
            },
            success:function(res){
                $('#main').html($(res).find('#main').html());
                $('#cmenu').html($(res).find('#cmenu').html());
                _renderMenu();
                mage.admin.reset();
                if (showLast) {
                    $('.cmenu-ctl-r').click();
                }
                _resizeBoard();
            },
            complete:function(res) {
                $.removeLoading();
            }
        })
    }
    function formatUrl(url) {
        url = url.replace(URL,'');
        if (url.indexOf('/')!=0) {
            url = '/'+url;
        }
        return url;
    }
    function _renderMenu() {
        $('a.v-ajax').off('click').click(function(){
            var url = $(this).attr('href') ? $(this).attr('href') : $(this).data('url');
            $('li.level0').removeClass("active");
            $(this).parents('i.level0').addClass('active');
            mage.admin.goPage(url);
            return false;
        })
        $('.m-ajax').off('click').click(function(){
            mage.admin.goPage(URL+$(this).data('url'));
        })
        //menus resize
        var _cmenuLen = $('#cmenu').width();
        var _cmenuBoxLen = $('#cmenu-box').width();
        if (_cmenuBoxLen>_cmenuLen) {
            $('#cmenu').addClass('scroll');
        } else {
            $('#cmenu').removeClass('scroll');
        }
        $('.cmenu-ctl-l').off('click').click(function(){
            $('#cmenu-box').css('transform','translate3d(0, 0px, 0px)');
        })
        $('.cmenu-ctl-r').off('click').click(function(){
            if (_cmenuBoxLen>_cmenuLen) {
                $('#cmenu-box').css('transform','translate3d(-'+(_cmenuBoxLen-_cmenuLen+15)+'px, 0px, 0px)');
            }
        })
        $('.m-ajax i').off('click').click(function(event){
            var _this = $(this);
            event.stopPropagation();
            //删除当前&激活最后一个
            $.post(URL+'b/ajax/delMenu',{form_key:FORM_KEY,'ajax-menu':$(this).parent().data('url')},function(res){
                if (res.code==1) {
                    $.showLoading();

                    _this.parent().remove();
                    if ($('.m-ajax').length>1) {
                        var _url = $('.m-ajax:last-child').data('url');
                        mage.admin.goPage(URL+_url,true);
                    } else {
                        window.location.href = URL+'b/dashboard/';
                    }
                }
            },'json');

        })
    }
    function _resizeBoard() {
        var h = document.documentElement.clientHeight-$('.app-wrap > .header').height();
        if (h<300) {
            h = 300;
        }
        $('.inner-wrap').css('height',h+'px').css('overflow','hidden');
        if ($('.hor-scroll').length) {
            $('.hor-scroll').css('height',(h-$('.hor-scroll').offset().top-32)+'px').css('overflow-y','scroll');
        }

    }
    function init() {
        _renderMenu();
        _resizeBoard();
        $(window).resize(function () {
            _resizeBoard();
        })
        mage.admin.reset();
        $(".lazy").lazyload({effect : "fadeIn", placeholder_data_img:'/static/img/placeholder/thumbnail.jpg'});
    }
    function reset() {
        $('.chosen').chosen({disable_search_threshold: 10,width:"100%"});
        $('textarea').autoHeight();
        $('.tooltips').mouseover(function() {
            $this = $(this);
            var self = this;
            if ($('#'+$this.data('target')).html()) {
                $.pt({target: self,content: $('#'+$this.data('target')).html()});
            }
        });
    }
    return {
        goPage: goPage,
        formatUrl:formatUrl,
        reset:reset,
        init:init,
    }
})();
$(function(){
    renderTabs();
    mage.admin.init();

})
function renderTabs(tid) {
    tid = tid ? tid : '';
    $(tid+'ul.tabs li').click(function(){
        $(this).siblings().removeClass('active');
        $(this).addClass('active');
        var t = $(this).attr('data-target');
        var ct = $(this).parent().attr('data-target');
        $('#'+ct+' .tab-content').hide();
        $('#'+ct+' #'+t).show();
    })
}
function decorateAjaxForm(id) {
    if (!id) {
        $('.with-select').each(function(){
            if ($(this).next() && !$(this).next().hasClass('i-select')) {
                $(this).parent().addClass('pr');
                $(this).after('<i class="i-select"></i>');
            }
        })
        if ($('.datepicker,.timepicker').length>0) {
            $('.datepicker').Zebra_DatePicker(defaultDatePickerSetting);
            $('.timepicker').Zebra_DatePicker(timePickerSetting);
        }
        if ($('.chosen').length>0) {
            $('.chosen').chosen({
                disable_search_threshold: 10,
                width:"100%"
            });
        }
        if ($('.mio-dg-wrap .cke').length>0) {
            $('.mio-dg-wrap .cke').each(function(){
                var _id = $(this).attr('id');
                CKEDITOR.replace(_id,{} );
            })
        }
    } else {
        $('#'+id+' .with-select').each(function(){
            if ($(this).next() && !$(this).next().hasClass('i-select')) {
                $(this).parent().addClass('pr');
                $(this).after('<i class="i-select"></i>');
            }
        })
        $('#'+id+' .datepicker').Zebra_DatePicker(defaultDatePickerSetting);
        $('#'+id+' .chosen').chosen({
            disable_search_threshold: 10,
            width:"100%"
        });
    }
}
String.prototype.padStart = function padStart(targetLength,padString) {
    targetLength = targetLength>>0;
    padString = String((typeof padString !== 'undefined' ? padString : ' '));
    if (this.length > targetLength) {
        return String(this);
    }
    else {
        targetLength = targetLength-this.length;
        if (targetLength > padString.length) {
            padString += padString.repeat(targetLength/padString.length);
        }
        return padString.slice(0,targetLength) + String(this);
    }
};
String.prototype.replaceAll  = function(s1,s2){
    return this.replace(new RegExp(s1,"gm"),s2);
}
//Textarea 自动高度
jQuery.fn.extend({
    autoHeight: function(){
        return this.each(function(){
            var $this = jQuery(this);
            if( !$this.attr('_initAdjustHeight') ){
                $this.attr('_initAdjustHeight', $this.outerHeight());
            }
            _adjustH(this).on('input', function(){
                _adjustH(this);
            });
        });
        function _adjustH(elem){
            var $obj = jQuery(elem);
            return $obj.css({height: $obj.attr('_initAdjustHeight'), 'overflow-y': 'hidden'}).height( elem.scrollHeight );
        }
    }
});
var callbacks = $.Callbacks();

/*** Tooltip **/
!function(t){Math.max,Math.min;t.pt=t.pureToolTips=function(e){var o,i,s,n,r=t.extend({target:null,position:"t",align:"c",arrow:!0,content:"",width:200,height:"auto",autoClose:!0,time:2e3,leaveClose:!1,close:null},e||{}),a=t(".pt"),l=t(r.target),c=l.offset().top,p=l.offset().left,u=l.outerWidth(),f=l.outerHeight(),h=r.position,d=r.align,b=r.arrow,m={b:"pt-up",t:"pt-down",r:"pt-left",l:"pt-right"},w=m[h]||m.t;return function(){if(r.target)return a.length||(a=t('<div class="pt pt-down"><div class="cont"></div><b class="out"></b><b class="in"></b></div>').appendTo(document.body)),a.removeClass().addClass("pt "+(b?w:"")).find(".cont").html(r.content).css({width:r.width,height:r.height}),o=a.find(".out").toggle(b),i=a.find(".in").toggle(b),s=a.outerWidth(),n=a.outerHeight(),b&&function(){var t,e,r,a="auto";switch(h){case"t":r=parseInt(o.css("border-top-width"),10),t={bottom:-r,left:s/2-r,top:a,right:a},l(),e={top:a,left:t.left+1,bottom:t.bottom+1,right:a};break;case"b":r=parseInt(o.css("border-bottom-width"),10),t={top:-r,left:s/2-r,right:a,bottom:a},l(),e={top:t.top+1,left:t.left+1,bottom:a,right:a};break;case"l":r=parseInt(o.css("border-left-width"),10),t={top:n/2-r,right:-r,left:a,bottom:a},c(),e={top:t.top+1,right:t.right+1,left:a,bottom:a};break;case"r":r=parseInt(o.css("border-right-width"),10),t={top:n/2-r,left:-r,right:a,bottom:a},c(),e={top:t.top+1,left:t.left+1,right:a,bottom:a}}function l(){"l"===d&&u/2>r&&u/2<s-r?t.left=u/2-r/2:"r"===d&&u/2>r&&u/2<s-r&&(t.left=s-u/2-r/2)}function c(){"t"===d&&f/2>r&&f/2<n-r?t.top=f/2-r:"b"===d&&f/2>r&&f/2<n-r&&(t.top=n-f/2-r)}o.css(t),i.css(e)}(),a.css(function(){var t=b?parseInt(o.css("border-top-width"),10):3,e=b?parseInt(o.css("border-right-width"),10):3,i={};switch(d){case"c":break;case"t":i.top=c;break;case"b":i.top=c+f-n;break;case"l":i.left=p;break;case"r":i.left=p+u-s}switch(h){case"t":i.top=c-n-e;break;case"b":i.top=c+f+e;break;case"l":i.left=p-s-t;break;case"r":i.left=p+u+t}return i.top||(i.top=c+f/2-n/2),i.left||(i.left=p+u/2-s/2),i}()).show(),r.leaveClose&&a.unbind("mouseleave").mouseleave(function(e){a.hide(),t.isFunction(r.close)&&r.close()}).unbind("mouseenter").mouseenter(function(){window.ptt&&clearTimeout(ptt)}),r.autoClose&&!r.leaveClose&&(r.timeout,window.ptt&&clearTimeout(ptt),window.pta&&clearTimeout(pta),window.pta=setTimeout(function(){a.hide(),t.isFunction(r.close)&&r.close()},r.time)),a}()},t.fn.pt=t.fn.pureToolTips=function(e){var o=t.extend({leaveClose:!0},e||{});return this.each(function(){t(this).mouseenter(function(){window.ptt&&clearTimeout(ptt),window.pta&&clearTimeout(pta),o.target=this,t.pt(o)}).mouseleave(function(){window.ptt=setTimeout(function(){t(".pt").hide(),t.isFunction(o.close)&&o.close()},500)})})}}(jQuery);

//后台表单图片上传
function formRenderBase64(htmlId) {
    var img = document.getElementById(htmlId)
    var imgFile = new FileReader();
    imgFile.readAsDataURL(img.files[0]);
    imgFile.onload = function () {
        if (this.result) {
            if ($('#'+htmlId+'_image').length>0) {
                $('#'+htmlId+'_image').attr('src',this.result);
            } else {
                if ($('#'+htmlId).parent().siblings('#'+htmlId+'_image').length>0) {
                    $('#'+htmlId+'_image').attr('src',this.result);
                } else {
                    $('#'+htmlId).parent().before('<img id="'+htmlId+'_image" src="'+this.result+'" class="small-image-preview v-middle" height="40">');
                }
            }
        }
    }
}